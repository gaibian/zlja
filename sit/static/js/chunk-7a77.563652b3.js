(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7a77"],{"72Ro":function(t,e,n){},"8T0q":function(t,e,n){"use strict";n.d(e,"r",function(){return o}),n.d(e,"a",function(){return i}),n.d(e,"f",function(){return r}),n.d(e,"g",function(){return s}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return d}),n.d(e,"c",function(){return m}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return f}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return g}),n.d(e,"q",function(){return y}),n.d(e,"m",function(){return _}),n.d(e,"n",function(){return b}),n.d(e,"o",function(){return v}),n.d(e,"p",function(){return w});var a=n("t3Un");function o(t){return a.a.get("insurance/company",t)}function i(t){return a.a.post("insurance/company",t)}function r(t){return a.a.delete("insurance/company/"+t)}function s(t){return a.a.get("insurance/company/"+t)}function l(t,e){return a.a.put("insurance/company/",t,e)}function c(t){return a.a.post("insurance/companyRate",t)}function u(t){return a.a.get("insurance/companyRate/"+t)}function d(t,e){return a.a.put("insurance/companyRate/",t,e)}function m(t){return a.a.delete("insurance/companyRate/"+t)}function p(t){return a.a.post("insurance/ask",t)}function f(t){return a.a.delete("insurance/ask/"+t)}function h(t){return a.a.get("insurance/ask/"+t)}function g(t,e){return a.a.put("insurance/ask/",t,e)}function y(t){return a.a.get("insurance/ask/logIndex",t)}function _(t){return a.a.post("insurance/ask/logSave",t)}function b(t){return a.a.delete("insurance/ask/logDelete/?id="+t,"")}function v(t){return a.a.get("insurance/ask/logRead/?id="+t)}function w(t,e){return a.a.put("insurance/ask/logUpdate/",t,e)}},GhFi:function(t,e,n){"use strict";n.r(e);var a=n("pCtG"),o=n("tT7d"),i=n("8T0q"),r={name:"companyRateEdit",props:["editId"],data:function(){return{postForm:{status:"draft"},isLoading:!1,loading:!1,companyOptions:[],form:{name:"",code:"",company_name:"",commission_rate:"",total_rate:""}}},created:function(){var t=this;Object(i.d)(this.editId).then(function(e){"error"!==e&&(console.log(e),t.form=e.data,t.companyOptions.push({company_name:e.data.company_name,id:e.data.company_id}))})},methods:{edit:function(){var t=this;this.isLoading=!0,console.log(this.form),Object(i.e)(this.editId,this.form).then(function(e){"error"!==e?(_g.toastMsg("success","保存成功"),t.isLoading=!1,setTimeout(function(){t.$emit("close")},300)):t.isLoading=!1})},remoteMethodCompany:function(t){var e=this;if(""!==t){var n={params:{keywords:t,type:1}};Object(i.r)(n).then(function(t){"error"!==t?(console.log(t),e.companyOptions=t.data.list):e.companyOptions=[]})}},onSubmit:function(){var t=this;this.isLoading=!0,companyRateAdd(this.form).then(function(e){"error"!==e?(console.log(e),t.isLoading=!1,setTimeout(function(){t.addRefresh("companyRate")},300)):t.isLoading=!1})},handleEmpty:function(){this.form={name:"",code:"",company_name:""}}}},s=n("KHd+"),l=Object(s.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dialog-scroll",[n("el-form",{ref:"form",attrs:{model:t.form,"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"保险公司"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"",placeholder:"请输入保险公司名称","remote-method":t.remoteMethodCompany,loading:t.loading},model:{value:t.form.company_name,callback:function(e){t.$set(t.form,"company_name",e)},expression:"form.company_name"}},t._l(t.companyOptions,function(t){return n("el-option",{key:t.id,attrs:{label:t.company_name,value:t.id}})}))],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"费率等级名词"}},[n("el-input",{attrs:{placeholder:"请输入费率等级名词",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"费率等级编码"}},[n("el-input",{attrs:{placeholder:"请输入费率等级编码",clearable:""},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"佣金率"}},[n("el-input",{attrs:{placeholder:"请输入佣金率",clearable:""},model:{value:t.form.commission_rate,callback:function(e){t.$set(t.form,"commission_rate",e)},expression:"form.commission_rate"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"手续费率"}},[n("el-input",{attrs:{placeholder:"请输入手续费率",clearable:""},model:{value:t.form.total_rate,callback:function(e){t.$set(t.form,"total_rate",e)},expression:"form.total_rate"}})],1)],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){t.edit("form")}}},[t._v("提交")])],1)],1)],1)},[],!1,null,null,null);l.options.__file="edit.vue";var c=l.exports,u=n("t3Un"),d={name:"companyRate",mixins:[a.a],components:{rateEdit:c,uploadExcel:o.a},data:function(){return{tableData:[],tableHeight:null,update:!1,loading:!1,companyOptions:[],editId:"",centerDialogVisible:!1,pagingFlag:!1,modifyFlag:!0,modifyText:"修改",pageCount:1,num:0,number:null,searchForm:{company_id:"",type:1,queryCheck:0},userData:{type:1,id:"",company_name:""}}},activated:function(){this.$route.query.pageClick&&(this.init(),this.update=!this.update)},created:function(){var t=this;bus.$on("companyRate",function(e){t.init(),t.update=!t.update}),this.init()},methods:{handleReset:function(){console.log("重置"),this.num=0,this.pageCount=1},upload:function(){var t=this;this.num++;var e={number:this.number,page:this.num};u.a.post("insurance/companyRate/import",e).then(function(e){"error"!==e&&(t.num>=t.pageCount?t.loading=!1:t.upload())})},init:function(){this.pagingFlag=!1;void 0===this.$route.query.companyId||":companyId"==this.$route.query.companyId?(this.searchForm.company_id="",this.searchForm.id="",this.searchForm.company_name=""):(this.searchForm.company_id=Number(this.$route.query.companyId),this.userData.id=Number(this.$route.query.companyId),this.userData.company_name=this.$route.query.companyName),this.pagingFlag=!0,console.log("进来了")},handleModify:function(t){var e=this;if(t.row.isModifyLoading)t.row.modifyText="保存",t.row.isModifyLoading=!1,t.row.cancelEditFlag=!0;else{console.log(t);var n={name:t.row.name,code:t.row.code,company_name:t.row.company_name,commission_rate:t.row.commission_rate,total_rate:t.row.total_rate};Object(i.e)(t.row.id,n).then(function(n){"error"!==n&&(_g.toastMsg("success","保存成功"),t.row.modifyText="修改",t.row.isModifyLoading=!0,t.row.cancelEditFlag=!1,setTimeout(function(){e.update=!e.update},300))})}},selected:function(t){console.log(t),this.pageCount=t.data.page_count,this.number=t.data.number,this.upload()},cancelEdit:function(t){t.row.isModifyLoading=!0,t.row.cancelEditFlag=!1},handleEdit:function(t){this.editId=t.row.id,this.centerDialogVisible=!0,this.$refs.dialog.open()},dialogClose:function(){this.update=!this.update,this.centerDialogVisible=!1},handleClose:function(){this.centerDialogVisible=!1,this.$refs.dialog.close()},handleDelete:function(t){var e=this;this.$confirm("确定删除该费率等级?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.c)(t.row.id).then(function(t){"error"!==t&&(_g.toastMsg("success","删除成功"),setTimeout(function(){e.update=!e.update}))})}).catch(function(){})},handlePaging:function(t){var e=this;this.loading=!0,setTimeout(function(){e.tableData=t.map(function(t){return t.isModifyLoading=!0,t.modifyText="修改",t}),e.loading=!e.loading},300)},handleSearch:function(){this.searchForm.queryCheck=1,this.update=!this.update}}},m=(n("wy6m"),Object(s.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"mainContainer",staticClass:"app_main_container"},[n("div",{staticClass:"page_table_box"},[n("div",{ref:"topAdd",staticClass:"filter-container"},[n("company-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{url:"insurance/company",data:t.userData,placeholder:"请输入保险公司查询"},model:{value:t.searchForm.company_id,callback:function(e){t.$set(t.searchForm,"company_id",e)},expression:"searchForm.company_id"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-search",size:"small"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),n("router-link",{staticClass:"filter-item",attrs:{to:{name:"companyRateOperate"}}},[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("添加")])],1),t._v(" "),n("upload-excel",{staticClass:"filter-item",attrs:{btnText:"导入",num:t.num,pageCount:t.pageCount,url:"insurance/companyRate/import"},on:{reset:t.handleReset,"on-selected-file":t.selected}})],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,"element-loading-text":"数据加载中","max-height":t.tableHeight,border:""}},[n("el-table-column",{attrs:{label:"保险公司名称",prop:"company_name"}}),t._v(" "),n("el-table-column",{attrs:{label:"费率等级名称",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"费率等级编码",prop:"code"}}),t._v(" "),n("el-table-column",{attrs:{label:"佣金率",prop:"commission_rate"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.isModifyLoading},model:{value:e.row.commission_rate,callback:function(n){t.$set(e.row,"commission_rate",n)},expression:"scope.row.commission_rate"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"手续费率",prop:"total_rate"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{disabled:e.row.isModifyLoading},model:{value:e.row.total_rate,callback:function(n){t.$set(e.row,"total_rate",n)},expression:"scope.row.total_rate"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:1===e.row.status?"":"warning"}},[t._v("\n                    "+t._s(t._f("status")(e.row.status))+"\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){t.handleModify(e)}}},[t._v(t._s(e.row.modifyText))]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.row.cancelEditFlag,expression:"scope.row.cancelEditFlag"}],attrs:{type:"primary",size:"mini"},on:{click:function(n){t.cancelEdit(e)}}},[t._v("取消")])],1)]}}])})],1),t._v(" "),n("div",{ref:"btmGroup",staticStyle:{height:"70px"}},[n("el-row",{staticClass:"pos_rel",staticStyle:{height:"70px"},attrs:{type:"flex",align:"middle",justify:"end"}},[t.pagingFlag?n("paging",{attrs:{type:"insurance/companyRate",updateType:"company",pagingdata:t.searchForm,update:t.update},on:{loadingChange:function(e){t.loading=!0},companyPaging:t.handlePaging}}):t._e()],1)],1)],1),t._v(" "),n("el-dialog",{ref:"dialog",staticClass:"dialog-slider",attrs:{width:"400px",visible:t.centerDialogVisible,"before-close":t.handleClose,title:"费率等级编辑"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[t.centerDialogVisible?n("rate-edit",{attrs:{editId:t.editId},on:{close:t.dialogClose}}):t._e()],1)],1)},[],!1,null,"5041a03f",null));m.options.__file="list.vue";e.default=m.exports},pCtG:function(t,e,n){"use strict";var a=n("7Qib");e.a={mounted:function(){var t=this;this.valHandle(),this.__resizeMainHanlder=Object(a.a)(function(){t.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(t,e){var n=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=n}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},wy6m:function(t,e,n){"use strict";var a=n("72Ro");n.n(a).a}}]);