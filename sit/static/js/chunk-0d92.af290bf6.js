(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d92"],{"8/u/":function(e,t,r){"use strict";r.d(t,"g",function(){return a}),r.d(t,"h",function(){return o}),r.d(t,"b",function(){return i}),r.d(t,"e",function(){return s}),r.d(t,"f",function(){return l}),r.d(t,"d",function(){return u}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return m});var n=r("t3Un");function a(e){return n.a.get("admin/users",e)}function o(e){return n.a.delete("admin/users/"+e)}function i(e){return n.a.post("admin/users",e)}function s(){return n.a.get("admin/groups")}function l(e,t){return n.a.put("admin/users/",e,t)}function u(e){return n.a.get("admin/users/"+e)}function c(e){return n.a.post("admin/users/followSave",e)}function m(e){return n.a.delete("admin/users/followDelete/"+e)}},"8T0q":function(e,t,r){"use strict";r.d(t,"r",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"f",function(){return i}),r.d(t,"g",function(){return s}),r.d(t,"h",function(){return l}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return m}),r.d(t,"c",function(){return f}),r.d(t,"i",function(){return d}),r.d(t,"j",function(){return p}),r.d(t,"k",function(){return _}),r.d(t,"l",function(){return h}),r.d(t,"q",function(){return g}),r.d(t,"m",function(){return b}),r.d(t,"n",function(){return v}),r.d(t,"o",function(){return y}),r.d(t,"p",function(){return k});var n=r("t3Un");function a(e){return n.a.get("insurance/company",e)}function o(e){return n.a.post("insurance/company",e)}function i(e){return n.a.delete("insurance/company/"+e)}function s(e){return n.a.get("insurance/company/"+e)}function l(e,t){return n.a.put("insurance/company/",e,t)}function u(e){return n.a.post("insurance/companyRate",e)}function c(e){return n.a.get("insurance/companyRate/"+e)}function m(e,t){return n.a.put("insurance/companyRate/",e,t)}function f(e){return n.a.delete("insurance/companyRate/"+e)}function d(e){return n.a.post("insurance/ask",e)}function p(e){return n.a.delete("insurance/ask/"+e)}function _(e){return n.a.get("insurance/ask/"+e)}function h(e,t){return n.a.put("insurance/ask/",e,t)}function g(e){return n.a.get("insurance/ask/logIndex",e)}function b(e){return n.a.post("insurance/ask/logSave",e)}function v(e){return n.a.delete("insurance/ask/logDelete/?id="+e,"")}function y(e){return n.a.get("insurance/ask/logRead/?id="+e)}function k(e,t){return n.a.put("insurance/ask/logUpdate/",e,t)}},FOLm:function(e,t,r){"use strict";var n=r("j+/D");r.n(n).a},"j+/D":function(e,t,r){},qL4L:function(e,t,r){"use strict";r.d(t,"g",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"h",function(){return l}),r.d(t,"b",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return m});var n=r("t3Un");function a(e){return n.a.delete("admin/circulationSheet/"+e)}function o(e){return n.a.post("admin/circulationSheet",e)}function i(e){return n.a.get("admin/circulationSheet/"+e)}function s(e,t){return n.a.put("admin/circulationSheet/",e,t)}function l(e){return n.a.post("flow/flow/btn",e)}function u(e){return n.a.get("admin/systemParameter/itemIndex?parameter_id=6")}function c(e){return n.a.get("admin/circulationSheet/getCarInfo?car_license_num="+e)}function m(){return n.a.get("admin/circulationSheet/getNumber")}},xIWM:function(e,t,r){"use strict";r.r(t);var n=r("qL4L"),a=r("8T0q"),o=r("8/u/"),i={name:"noCirculationSheetAdminAdd",data:function(){return{postForm:{status:"draft"},operateTitle:"",isLoading:!1,options4:[],loadingText:"无数据",formLoading:!1,list:[],loading:!0,detailsOption:[],jqFlag:!1,syFlag:!1,form:{number:"",other:"",policy_num:"",salesman:"",username:"",car_license_num:"",insured_name:"",risks_num:0,is_transfer:"0",less_information:"0",less_information_detail:[],improper_rate_status:"1",has_last_year_policy:"1",numSelect:"",write_date:"",company_name:"",force_policy_num:"",remark:"",total_rate:""},companyData:{type:1,id:"",company_name:""},companyOptions:[],detailStatus:!1,improperStatus:!1,otherStatus:!1,pidOptions:[],getNumber:"",isBtnActive:!1,rules:{policy_num:[{required:!0,message:"请输入商业险保单号",trigger:"blur"}],force_policy_num:[{required:!0,message:"请输入交强险保单号",trigger:"blur"}],username:[{required:!0,message:"请选择业务员",trigger:"change"}],car_license_num:[{required:!0,message:"请输入车牌号",trigger:"blur"}],insured_name:[{required:!0,message:"请输入被保人",trigger:"blur"}],risks_num:[{required:!0,message:"请输入出险次数",trigger:"blur"}],less_information:[{required:!0,message:"请选择是否欠资料",trigger:"change"}],has_last_year_policy:[{required:!0,message:"请选择是否有上年保单",trigger:"change"}],improper_rate_status:[{required:!0,message:"请选择是否非正常流转单",trigger:"change"}],is_transfer:[{required:!0,message:"请选择是否过户",trigger:"change"}],numSelect:[{required:!0,message:"请选择保单类型",trigger:"change"}]}}},created:function(){var e=this;Object(n.f)().then(function(t){"error"!==t&&(e.getNumber=t.data)});this.operateTitle="添加表单",this.form.numSelect="3",this.jqFlag=!0,this.syFlag=!0,this.form.write_date=(new Date).format("yyyy-MM-dd"),Object(a.r)({params:{type:1}}).then(function(t){"error"!==t&&(console.log(t),e.companyOptions=t.data.list)}),Object(n.b)().then(function(t){"error"!==t&&(e.detailsOption=t.data)})},computed:{less_information_detail:function(){return this.form.less_information_detail}},watch:{less_information_detail:function(e,t){this.otherStatus=!1;for(var r=0;r<e.length;r++)10===e[r]&&(this.otherStatus=!0)}},methods:{handleFile:function(){""==this.form.car_license_num?_g.toastMsg("error","请先填写车牌号"):this.$router.push({name:"addFileAdmin",params:{number:this.form.car_license_num},query:{pageClick:_g.editRefresh("addFileAdmin")}})},handleCompany:function(e){var t=this;_(this.companyOptions).forEach(function(r){r.id==e&&(t.form.company_name=r.company_name)})},handleNumSelect:function(){"1"==this.form.numSelect&&(this.syFlag=!0,this.jqFlag=!1),"2"==this.form.numSelect&&(this.syFlag=!1,this.jqFlag=!0),"3"==this.form.numSelect&&(this.syFlag=!0,this.jqFlag=!0)},handleDetails:function(){},handleTransfer:function(){if("1"===this.form.less_information){this.detailStatus=!0,this.otherStatus=!1;for(var e=0;e<this.less_information_detail.length;e++)10===this.less_information_detail[e]&&(this.otherStatus=!0)}else this.detailStatus=!1,this.otherStatus=!1},handleImproper:function(){"1"===this.form.improper_rate_status?(this.improperStatus=!0,this.rules.improper_rate=[{required:!0,message:"请输入非正常手续费率",trigger:"blur"}],this.rules.improper_rate_difference=[{required:!0,message:"请输入非正常费差",trigger:"blur"}]):(this.improperStatus=!1,delete this.rules.improper_rate,delete this.rules.improper_rate_difference)},add:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.isLoading=!0,e.form.salesman=e.form.username,e.form.number=e.getNumber,e.form.less_information_detail=e.form.less_information_detail.join(","),Object(n.a)(e.form).then(function(t){"error"!==t?(_g.toastMsg("success","添加成功"),setTimeout(function(){e.addRefresh("noCirculationSheetAdminList")},1500),e.isLoading=!1):e.isLoading=!1}))})},handleEmpty:function(){this.form={number:"",other:"",policy_num:"",salesman:"",username:"",car_license_num:"",insured_name:"",risks_num:0,is_transfer:"",less_information:"",less_information_detail:[],improper_rate_status:"1",write_date:"",company_name:"",has_last_year_policy:"",remark:"",numSelect:"3",force_policy_num:"",total_rate:""}},remoteMethod:function(e){var t=this;if(this.loading=!0,""!==e){this.loadingText="数据正在请求中...";var r={params:{keywords:e,type:1}};Object(o.g)(r).then(function(e){"error"!==e?(t.options4=e.data.list,t.loading=!1):(t.loading=!1,t.options4=[])})}}}},s=(r("FOLm"),r("KHd+")),l=Object(s.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("sticky",{attrs:{className:"sub-navbar "+e.postForm.status,stickyTop:84}},[r("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[r("h1",{staticClass:"page-title-box"},[e._v("流转单"),r("em"),r("span",[e._v(e._s(e.operateTitle))])]),e._v(" "),r("div",[r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close"},on:{click:function(t){e.handleEmpty()}}},[e._v("清空表单")]),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",loading:e.isLoading},on:{click:function(t){e.add("form")}}},[e._v("保存")])],1)])]),e._v(" "),r("div",{staticClass:"app_main_content"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"form",attrs:{size:"medium",model:e.form,rules:e.rules,"label-width":"100px","label-position":"top","element-loading-text":"数据加载中..."}},[r("div",{staticClass:"block-box"},[r("el-row",{staticClass:"block-header-box"},[r("i"),e._v("流水号:"+e._s(e.getNumber))])],1),e._v(" "),r("div",{staticClass:"block-box"},[r("el-row",{staticClass:"block-header-box"},[r("i"),e._v("基本信息")]),e._v(" "),r("div",{staticClass:"block-content-box"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"保单类型",prop:"numSelect"}},[r("el-select",{staticStyle:{width:"100%"},on:{change:e.handleNumSelect},model:{value:e.form.numSelect,callback:function(t){e.$set(e.form,"numSelect",t)},expression:"form.numSelect"}},[r("el-option",{attrs:{label:"混合",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"单商业",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"单交强",value:"2"}})],1)],1)],1),e._v(" "),e.jqFlag?r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"交强险保单号",prop:"force_policy_num"}},[r("el-input",{attrs:{placeholder:"请输入交强险保单号",clearable:""},model:{value:e.form.force_policy_num,callback:function(t){e.$set(e.form,"force_policy_num","string"==typeof t?t.trim():t)},expression:"form.force_policy_num"}})],1)],1):e._e(),e._v(" "),e.syFlag?r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"商业险保单号",prop:"policy_num"}},[r("el-input",{attrs:{placeholder:"请输入商业保单号",clearable:""},model:{value:e.form.policy_num,callback:function(t){e.$set(e.form,"policy_num","string"==typeof t?t.trim():t)},expression:"form.policy_num"}})],1)],1):e._e()],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"出单日期"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择出单日期"},model:{value:e.form.write_date,callback:function(t){e.$set(e.form,"write_date",t)},expression:"form.write_date"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"保险公司"}},[r("company-input",{attrs:{url:"insurance/company",data:e.companyData,placeholder:"请输入保险公司查询"},model:{value:e.form.company_id,callback:function(t){e.$set(e.form,"company_id",t)},expression:"form.company_id"}})],1),e._v(" "),r("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.form.company_id,callback:function(t){e.$set(e.form,"company_id",t)},expression:"form.company_id"}})],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"业务员",prop:"username"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"","loading-text":e.loadingText,placeholder:"请输入关键词","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},e._l(e.options4,function(e){return r("el-option",{key:e.id,attrs:{label:e.realname,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"车牌号",prop:"car_license_num"}},[r("el-input",{attrs:{placeholder:"请输入车牌号",clearable:""},model:{value:e.form.car_license_num,callback:function(t){e.$set(e.form,"car_license_num","string"==typeof t?t.trim():t)},expression:"form.car_license_num"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"被保人",prop:"insured_name"}},[r("el-input",{attrs:{placeholder:"请输入被保人",clearable:""},model:{value:e.form.insured_name,callback:function(t){e.$set(e.form,"insured_name","string"==typeof t?t.trim():t)},expression:"form.insured_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"出险次数",prop:"risks_num"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:-1,max:99,label:"出险次数"},model:{value:e.form.risks_num,callback:function(t){e.$set(e.form,"risks_num",t)},expression:"form.risks_num"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"结算费率",prop:"total_rate"}},[r("el-input",{attrs:{placeholder:"请输入结算费率",clearable:""},model:{value:e.form.total_rate,callback:function(t){e.$set(e.form,"total_rate","string"==typeof t?t.trim():t)},expression:"form.total_rate"}})],1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"block-box"},[r("el-row",{staticClass:"block-header-box"},[r("i"),e._v("选择信息")]),e._v(" "),r("div",{staticClass:"block-content-box"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否过户",prop:"is_transfer"}},[r("el-radio-group",{model:{value:e.form.is_transfer,callback:function(t){e.$set(e.form,"is_transfer",t)},expression:"form.is_transfer"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否有上年保单",prop:"has_last_year_policy"}},[r("el-radio-group",{model:{value:e.form.has_last_year_policy,callback:function(t){e.$set(e.form,"has_last_year_policy",t)},expression:"form.has_last_year_policy"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"是否欠资料",prop:"less_information"}},[r("el-radio-group",{on:{change:function(t){e.handleTransfer()}},model:{value:e.form.less_information,callback:function(t){e.$set(e.form,"less_information",t)},expression:"form.less_information"}},[r("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),r("el-radio",{attrs:{label:"0"}},[e._v("否")])],1),e._v(" "),r("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:e.handleFile}},[e._v("查看文件")])],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.detailStatus,expression:"detailStatus"}],attrs:{label:"欠资料详情",prop:"less_information_detail"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"","collapse-tags":"",clearable:"",placeholder:"请选择"},on:{change:e.handleDetails},model:{value:e.form.less_information_detail,callback:function(t){e.$set(e.form,"less_information_detail",t)},expression:"form.less_information_detail"}},e._l(e.detailsOption,function(e){return r("el-option",{key:e.id,attrs:{label:e.description,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.otherStatus,expression:"otherStatus"}],attrs:{label:"其他",prop:"other"}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入资料详情"},model:{value:e.form.other,callback:function(t){e.$set(e.form,"other",t)},expression:"form.other"}})],1)],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息",clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)],1)],1)],1)])],1)],1)},[],!1,null,"74200c9e",null);l.options.__file="add.vue";t.default=l.exports}}]);