(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1d6a"],{"828q":function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return l}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return o});var n=a("t3Un");function i(e){return n.a.post("flow/flowDesign",e)}function l(e){return n.a.get("flow/flowDesign/"+e)}function r(e,t){return n.a.put("flow/flowDesign/",e,t)}function o(e){return n.a.post("flow/flowDesign/enables",e)}},TSgc:function(e,t,a){},Wgky:function(e,t,a){"use strict";a.r(t);a("t3Un");var n=a("pCtG"),i=(a("828q"),a("qL4L")),l=a("7Qib"),r={name:"noCirculationSheetAdminList",data:function(){return{pickerOptions2:{shortcuts:l.b},pageConfig:!1,tableHeaderData:[{label:"流水号",flag:!0},{label:"保险公司",flag:!0},{label:"订单日期",flag:!0},{label:"车牌号(被保人)",flag:!0},{label:"保单号",flag:!0},{label:"业务员",flag:!0},{label:"状态",flag:!0},{label:"操作",flag:!0}],queryTime:"",tableData:[],loading:!0,statusFlag:!1,examineFlag:!1,tableHeight:null,loadingEditIndex:null,loadingDeleteIndex:null,update:!1,modifyFlag:!0,handleEvent:!0,examineLoading:!0,examineTableLoading:!0,backspaceFlag:!0,centerDialogVisible:!1,doCheckData:null,examineTableData:[],backspaceOptions:[],examineTopData:[],improperStatus:!1,examineId:"",editId:"",examineModifyForm:{commission_rate:"",total_rate:"",policy_num:""},searchStatus:"",searchForm:{status:"",keywords:"",start:"",improper_rate_status:1,end:"",queryCheck:0},statusOptions:_g.statusOptions,options:[{value:"admin_circulation_sheet",label:"流转单"}],statusForm:{project_name:"",wf_id:"",new_type:"",check_con:"",wf_fid:"",url:"",wf_type:""},examineForm:{check_con:"",flow_process:"",wf_fid:"",wf_type:"",wf_id:"",wf_title:"",process_name:"",wf_backflow:""},newTypeOptions:[{value:"0",label:"普通"},{value:"1",label:"加急"},{value:"2",label:"紧急"},{value:"3",label:"特急"}],rules:{check_con:[{required:!0,message:"请填写审批意见sss",trigger:"blur"}]}}},watch:{searchStatus:function(e,t){this.searchForm.status=e.toString(",")},tableHeaderData:{handler:function(){console.log("更新了")},deep:!0}},mixins:[n.a],created:function(){var e=this;bus.$on("noCirculationSheetAdminList",function(t){e.update=!e.update})},methods:{handleC:function(e){console.log(e)},handlePageConfig:function(e){this.tableHeaderData=e},handleTime:function(e){this.searchForm.start=e[0],this.searchForm.end=e[1]},handleAdd:function(){this.isEdit=!1,this.$router.push({name:"noCirculationSheetAdminAdd"})},handleSeeClick:function(e){this.$router.push({name:"circulationFileAdmin",params:{id:e.row.id},query:{pageClick:_g.editRefresh("circulationFileAdmin")}})},handleSave:function(){var e=this;Object(i.c)(this.examineId,this.examineModifyForm).then(function(t){"error"!==t&&(_g.toastMsg("success","保存成功"),setTimeout(function(){e.modifyFlag=!0,e.handleEvent=!0},1500))})},handleSearch:function(){this.searchForm.queryCheck=1,this.update=!this.update},handlePaging:function(e){var t=this;this.loading=!0;var a=e.map(function(e){e.isEditLoading=!1,e.isDeleteLoading=!1,e.msg="",e.url="";var a={wf_fid:e.id,wf_type:t.options[0].value,status:e.status};return Object(i.h)(a).then(function(t){"error"!==t&&(e.msg=t.data.msg,e.url=t.data.url)}),e});setTimeout(function(){t.pageConfig=!0,t.tableData=a,t.loading=!t.loading},500)},editClick:function(e){this.isEdit=!0,this.$router.push({name:"noCirculationSheetAdminEdit",params:{id:e.row.id},query:{pageClick:!0}})},confirmDelete:function(e){var t=this;this.tableData[e.$index].isDeleteLoading=!0,this.$confirm("确认删除该流转单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.g)(e.row.id).then(function(e){"error"!==e&&(_g.toastMsg("success","删除成功"),setTimeout(function(){t.update=!t.update}))})}).catch(function(){t.tableData[e.$index].isDeleteLoading=!1})}},computed:{indexShow:function(){return _g.getHasRule("admin-circulationsheet-index")},addShow:function(){return _g.getHasRule("admin-circulationsheet-save")},readShow:function(){return _g.getHasRule("admin-circulationsheet-read")}}},o=(a("X3UW"),a("KHd+")),s=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"mainContainer",staticClass:"app_main_container"},[e.indexShow?a("div",{staticClass:"page_table_box"},[a("div",{ref:"topAdd",staticClass:"filter-container"},[a("el-date-picker",{staticStyle:{width:"300px","vertical-align":"middle","margin-right":"6px","margin-bottom":"10px"},attrs:{type:"daterange",align:"right","unlink-panels":"",size:"small","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},on:{change:e.handleTime},model:{value:e.queryTime,callback:function(t){e.queryTime=t},expression:"queryTime"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入车牌号查询"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",size:"small",clearable:"",placeholder:"请选择状态查询"},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-search",size:"small"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),e.pageConfig?a("page-config",{ref:"pageConfig",staticClass:"filter-item",attrs:{data:e.tableHeaderData},on:{change:e.handlePageConfig}}):e._e(),e._v(" "),e.addShow?a("el-button",{staticClass:"add_btn filter-item",staticStyle:{"margin-left":"0"},attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("添加流转单")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"center",data:e.tableData,"element-loading-text":"数据加载中",stripe:"",border:"","max-height":e.tableHeight}},[e.tableHeaderData[0].flag?a("el-table-column",{key:0,attrs:{label:"流水号",prop:"number","min-width":"200"}}):e._e(),e._v(" "),e.tableHeaderData[1].flag?a("el-table-column",{key:1,attrs:{label:"保险公司",prop:"company_name","min-width":"150"}}):e._e(),e._v(" "),e.tableHeaderData[2].flag?a("el-table-column",{key:2,attrs:{label:"订单日期",prop:"write_date",width:"100"}}):e._e(),e._v(" "),e.tableHeaderData[3].flag?a("el-table-column",{key:3,attrs:{label:"车牌号(被保人)",prop:"car_license_num","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.car_license_num))]),e._v(" "),a("div",[e._v(e._s(t.row.insured_name))])]}}])}):e._e(),e._v(" "),e.tableHeaderData[4].flag?a("el-table-column",{key:4,attrs:{label:"保单号",prop:"policy_num","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.policy_num?a("div",[e._v("商:"+e._s(t.row.policy_num))]):e._e(),e._v(" "),""!=t.row.force_policy_num?a("div",[e._v("交:"+e._s(t.row.force_policy_num))]):e._e()]}}])}):e._e(),e._v(" "),e.tableHeaderData[5].flag?a("el-table-column",{key:5,attrs:{label:"业务员",prop:"salesman_name","min-width":"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n            "+e._s(t.row.salesman_name)+"("+e._s(t.row.username)+")\n          ")])]}}])}):e._e(),e._v(" "),e.tableHeaderData[6].flag?a("el-table-column",{key:6,attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v("\n              "+e._s(e._f("finish")(t.row.status))+"\n            ")])],1)]}}])}):e._e(),e._v(" "),e.tableHeaderData[7].flag?a("el-table-column",{key:7,attrs:{label:"操作",fixed:"right",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"pos_rel"},[a("operates",[a("operate",{attrs:{label:"查看文件",icon:"operate-see",svgIcon:""},on:{change:function(a){e.handleSeeClick(t)}}}),e._v(" "),a("operate",{attrs:{label:"编辑",icon:"operate-edit",svgIcon:""},on:{change:function(a){e.editClick(t)}}}),e._v(" "),a("operate",{attrs:{label:"删除",icon:"operate-delete",svgIcon:""},on:{change:function(a){e.confirmDelete(t)}}})],1)],1)]}}])}):e._e()],1),e._v(" "),a("div",{ref:"btmGroup",staticStyle:{height:"60px"}},[a("el-row",{staticClass:"pos_rel",staticStyle:{height:"60px"},attrs:{type:"flex",align:"middle",justify:"end"}},[a("div",{staticClass:"block pages"},[a("paging",{attrs:{type:"admin/circulationSheet",updateType:"sheet",pagingdata:e.searchForm,update:e.update},on:{loadingChange:function(t){e.loading=!0},sheetPaging:e.handlePaging}})],1)])],1)],1):e._e()])},[],!1,null,"0314fda8",null);s.options.__file="list.vue";t.default=s.exports},X3UW:function(e,t,a){"use strict";var n=a("TSgc");a.n(n).a},pCtG:function(e,t,a){"use strict";var n=a("7Qib");t.a={mounted:function(){var e=this;this.valHandle(),this.__resizeMainHanlder=Object(n.a)(function(){e.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(e,t){var a=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=a}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},qL4L:function(e,t,a){"use strict";a.d(t,"g",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"d",function(){return r}),a.d(t,"c",function(){return o}),a.d(t,"h",function(){return s}),a.d(t,"b",function(){return c}),a.d(t,"e",function(){return u}),a.d(t,"f",function(){return d});var n=a("t3Un");function i(e){return n.a.delete("admin/circulationSheet/"+e)}function l(e){return n.a.post("admin/circulationSheet",e)}function r(e){return n.a.get("admin/circulationSheet/"+e)}function o(e,t){return n.a.put("admin/circulationSheet/",e,t)}function s(e){return n.a.post("flow/flow/btn",e)}function c(e){return n.a.get("admin/systemParameter/itemIndex?parameter_id=6")}function u(e){return n.a.get("admin/circulationSheet/getCarInfo?car_license_num="+e)}function d(){return n.a.get("admin/circulationSheet/getNumber")}}}]);