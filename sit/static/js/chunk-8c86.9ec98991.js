(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8c86"],{A9mt:function(t,e,n){},UajC:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return r});var a=n("t3Un");function i(){return a.a.get("admin/report/getViewList")}function l(t){return a.a.post("admin/report/setView",t)}function r(t){return a.a.get("test/dataList?view_name="+t)}},WROX:function(t,e,n){"use strict";var a=n("pgIo");n.n(a).a},ezys:function(t,e,n){"use strict";n.r(e);var a=n("UajC"),i=n("jr1U"),l=n.n(i),r=n("rfXi"),o=n.n(r),s=n("Kw5r");function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=[];return o()(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,"_expanded",e);var l=1;if(void 0!==a&&null!==a&&(l=a+1),s.default.set(t,"_level",l),n&&s.default.set(t,"parent",n),i.push(t),t.children&&t.children.length>0){var r=c(t.children,e,t,l);i=i.concat(r)}}),i}var u={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,evalArgs:Array,expandAll:{type:Boolean,default:!1}},created:function(){},computed:{formatData:function(){var t=void 0;t=Array.isArray(this.data)?this.data:[this.data];var e=this.evalFunc||c,n=this.evalArgs?l()([t,this.expandAll],this.evalArgs):[t,this.expandAll];return e.apply(null,n)}},methods:{showRow:function(t){var e=!t.row.parent||t.row.parent._expanded&&t.row.parent._show;return t.row._show=e,e?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},handleSelectionChange:function(t){this.$emit("selectVal",t)},toggleExpanded:function(t){var e=this.formatData[t];e._expanded=!e._expanded},iconShow:function(t,e){return 0===t&&e.children&&e.children.length>0}}},d=(n("po8C"),n("WROX"),n("KHd+")),f=Object(d.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",t._b({attrs:{data:t.formatData,"row-style":t.showRow},on:{"selection-change":t.handleSelectionChange}},"el-table",t.$attrs,!1),[n("el-table-column",{attrs:{type:"selection",context:t._self,width:"50"}}),t._v(" "),0===t.columns.length?n("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row._level,function(t){return n("span",{key:t,staticClass:"ms-tree-space"})}),t._v(" "),t.iconShow(0,e.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(n){t.toggleExpanded(e.$index)}}},[e.row._expanded?n("i",{staticClass:"el-icon-caret-top"}):n("i",{staticClass:"el-icon-caret-bottom"})]):t._e(),t._v("\n      "+t._s(e.row.title)+"\n    ")]}}])}):t._l(t.columns,function(e,a){return n("el-table-column",{key:e.value,attrs:{label:e.text,width:e.width},scopedSlots:t._u([{key:"default",fn:function(i){return[t._l(i.row._level,function(e){return 0===a?n("span",{key:e,staticClass:"ms-tree-space"}):t._e()}),t._v(" "),t.iconShow(a,i.row)?n("span",{staticClass:"tree-ctrl",on:{click:function(e){t.toggleExpanded(i.$index)}}},[i.row._expanded?n("i",{staticClass:"el-icon-minus"}):n("i",{staticClass:"el-icon-plus"})]):t._e(),t._v("\n      "+t._s(i.row[e.value])+"\n    ")]}}])})}),t._v(" "),t._t("default")],2)},[],!1,null,"29ad663b",null);f.options.__file="index.vue";var p=f.exports;function _(t,e,n,a,i){var l=[],r=[];return o()(t).forEach(function(t){void 0===t._expanded&&s.default.set(t,"_expanded",e);var o=1;if(void 0!==a&&null!==a&&(o=a+1),s.default.set(t,"_level",o),n?(s.default.set(t,"parent",n),l[o]||(l[o]=0),s.default.set(t,"_marginLeft",l[o]+n._marginLeft),s.default.set(t,"_width",t[i]/n[i]*n._width),l[o]+=t._width):(l[t.id]=[],l[t.id][o]=0,s.default.set(t,"_marginLeft",0),s.default.set(t,"_width",1)),r.push(t),t.children&&t.children.length>0){var c=_(t.children,e,t,o,i);r=r.concat(c)}}),r}var v={name:"viewList",mixins:[n("pCtG").a],components:{treeTable:p},data:function(){return{loading:!0,tableData:[],func:_,tableHeight:null,expandAll:!1,args:[null,null,"timeLine"]}},created:function(){var t=this;this.init(),bus.$on("viewList",function(e){t.init()})},methods:{init:function(){var t=this;Object(a.a)().then(function(e){"error"!==e&&(t.tableData=e.data.list,t.loading=!1)})}}},h=Object(d.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"mainContainer",staticClass:"app_main_container"},[n("div",{ref:"topAdd",staticClass:"top_add_menu_container"},[n("router-link",{attrs:{to:"add"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"}},[t._v("添加视图")])],1)],1),t._v(" "),n("div",{staticClass:"page_table_box"},[n("tree-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,evalFunc:t.func,"max-height":t.tableHeight,"element-loading-text":"数据加载中",evalArgs:t.args,expandAll:t.expandAll,border:""}},[n("el-table-column",{attrs:{label:"名称",prop:"view_name"}}),t._v(" "),n("el-table-column",{attrs:{label:"表名",prop:"view_tables"}}),t._v(" "),n("el-table-column",{attrs:{label:"字段",prop:"view_fields"}}),t._v(" "),n("el-table-column",{attrs:{label:"连接条件",prop:"view_condition"}}),t._v(" "),n("el-table-column",{attrs:{label:"是否主表"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("sf")(e.row.is_main)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"导入条件",prop:"import_field"}}),t._v(" "),n("el-table-column",{attrs:{label:"导入顺序",prop:"import_sort"}})],1)],1)])},[],!1,null,null,null);h.options.__file="list.vue";e.default=h.exports},jr1U:function(t,e,n){t.exports={default:n("wObO"),__esModule:!0}},pCtG:function(t,e,n){"use strict";var a=n("7Qib");e.a={mounted:function(){var t=this;this.valHandle(),this.__resizeMainHanlder=Object(a.a)(function(){t.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(t,e){var n=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=n}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},pgIo:function(t,e,n){},po8C:function(t,e,n){"use strict";var a=n("A9mt");n.n(a).a},wObO:function(t,e){t.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}}}]);