(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3dab"],{LDo3:function(e,t,s){},NO99:function(e,t,s){e.exports=s.p+"static/img/500269947.cb40baf.jpg"},"StW+":function(e,t,s){"use strict";var n=s("iCc5"),o=s.n(n),a=s("V7oC"),i=s.n(a);new(function(){function e(){o()(this,e),this.handle={}}return i()(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" must be a function');this.handle[e]||(this.handle[e]=[]),this.handle[e].push(t)}},{key:"emit",value:function(e){for(var t=this,s=arguments.length,n=Array(s>1?s-1:0),o=1;o<s;o++)n[o-1]=arguments[o];var a=this.handle[e];Array.isArray(a)&&a.map(function(e){e.apply(t,n)})}},{key:"off",value:function(e,t){var s=this.handle[e];if(t){if(Array.isArray(s)){var n=s.indexOf(t);n>-1&&s.splice(n,1)}}else this.handle[e]=[]}},{key:"install",value:function(e){e.prototype.$subscribe=this}}]),e}())},V7oC:function(e,t,s){"use strict";t.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(s("SEkw"));t.default=function(){function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}}return function(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}}()},XqWe:function(e,t,s){"use strict";var n=s("LDo3");s.n(n).a},Yfch:function(e,t,s){"use strict"},c11S:function(e,t,s){"use strict";var n=s("gTgX");s.n(n).a},gTgX:function(e,t,s){},iCc5:function(e,t,s){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},ntYl:function(e,t,s){"use strict";s.r(t);s("Yfch"),s("StW+"),s("2c6e");var n=s("t3Un"),o=(s("oYx3"),s("NO99")),a=s.n(o),i={name:"login",data:function(){return{restaurants:[],loginForm:{username:"",password:""},dialogFlag:!0,loginLoading:!0,loginActive:!1,loginBgFlag:!1,loginBg:a.a,rememberNews:[],checkList:[],loginRules:{username:[{required:!0,trigger:"blur",message:"请输入正确的用户名"}],password:[{required:!0,trigger:"blur",validator:function(e,t,s){t.length<5?s(new Error("密码不能小于5位")):s()}}]},loading:!1,pwdType:"password",menusList:null}},created:function(){var e=this;setTimeout(function(){e.loginActive=!0},300);var t=Lockr.get("reAccount"),s=Lockr.get("rePassword");t&&(this.loginForm.username=t,this.checkList.push("记住账号"),this.rememberNews.push("记住账号")),s&&(this.loginForm.password=s,this.checkList.push("记住密码"),this.rememberNews.push("记住密码")),this.handleMenus()},mounted:function(){this.restaurants=[],this.loginBg&&(this.loginBgFlag=!0)},methods:{handleSelect:function(){},querySearch:function(e,t){var s=this.restaurants;t(e?s.filter(this.createFilter(e)):s),console.log("sss")},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleCheckbox:function(e){this.rememberNews=e},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleMenus:function(){},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return _g.toastMsg("error","账号密码格式错误"),!1;e.loginLoading=!1,setTimeout(function(){e.loading=!e.loading;var t={};t.username=e.loginForm.username,t.password=e.loginForm.password;var s=!1,o=!1;_(e.rememberNews).forEach(function(e){"记住账号"===e&&(s=!0),"记住密码"===e&&(o=!0)}),s?Lockr.set("reAccount",e.loginForm.username):Lockr.rm("reAccount"),o?Lockr.set("rePassword",e.loginForm.password):Lockr.rm("rePassword"),n.a.post("admin/base/login",t).then(function(t){if(console.log(t),"error"!==t){Lockr.rm("loginStatus"),e.loading=!e.loading,_(t.data.menusList).forEach(function(e,t){e.selected=0==t}),Lockr.set("menus",t.data.menusList),Lockr.set("authKey",t.data.authKey),Lockr.set("rememberKey",t.data.rememberKey),Lockr.set("authList",t.data.authList),Lockr.set("userInfo",t.data.userInfo),Lockr.set("sessionId",t.data.sessionId),window.axios.defaults.headers.authKey=Lockr.get("authKey");var s=t.data.menusList;store.dispatch("GenerateRoutes",s).then(function(){router.addRoutes(store.getters.addRouters)}),e.$store.dispatch("setAuthKey",t.data.authKey).then(function(){setTimeout(function(){"/home"!==e.$route.path?router.replace("/home"):_g.shallowRefresh(e.$route.name)})}),e.$store.dispatch("setInfo",t.data.userInfo)}else console.log("进来了"),e.loginLoading=!0})},1200)})}},computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device}}},r=(s("c11S"),s("XqWe"),s("KHd+")),l=Object(r.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[e.loginBgFlag?s("div",{staticClass:"login-bg"},[s("div",{staticClass:"mask_box"}),e._v(" "),s("transition",{attrs:{name:"fade",mode:"out-in"}},[s("img",{staticClass:"img",attrs:{src:e.loginBg}})])],1):e._e(),e._v(" "),s("div",{staticClass:"login-from-container",class:e.loginActive?"active":""},[s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.loginLoading,expression:"loginLoading"}],ref:"loginForm",staticClass:"login-form",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[s("h3",{staticClass:"title"},[e._v("欢迎登录"),s("span")]),e._v(" "),s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container svg-container_login"},[s("svg-icon",{staticClass:"svg_icon",attrs:{"icon-class":"user"}})],1),e._v(" "),s("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearch,autoComplete:"off",placeholder:"请输入用户名"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return[s("p",[e._v(e._s(n.value))])]}}]),model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{staticClass:"svg_icon",attrs:{"icon-class":"password"}})],1),e._v(" "),s("el-input",{attrs:{type:e.pwdType,autoComplete:"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),s("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[s("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),s("div",{staticClass:"tips"},[s("el-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[s("el-col",{attrs:{span:12}},[s("el-checkbox-group",{on:{change:e.handleCheckbox},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[s("el-checkbox",{attrs:{label:"记住账号"}}),e._v(" "),s("el-checkbox",{attrs:{label:"记住密码"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("div",{staticClass:"re-password"})])],1)],1),e._v(" "),s("div",{staticClass:"login-btn",on:{click:e.handleLogin}},[e._v("立即登录")])],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loginLoading,expression:"!loginLoading"}],staticClass:"login-loading-container content"},[e._m(0),e._v(" "),s("p",{staticClass:"loading_text"},[e._v("正在登录中...")])])],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loader3"},[t("span"),this._v(" "),t("span")])}],!1,null,"0fd763af",null);l.options.__file="index.vue";t.default=l.exports}}]);