(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62c1"],{"8/u/":function(t,o,i){"use strict";i.d(o,"g",function(){return n}),i.d(o,"h",function(){return s}),i.d(o,"b",function(){return l}),i.d(o,"e",function(){return a}),i.d(o,"f",function(){return r}),i.d(o,"d",function(){return c}),i.d(o,"a",function(){return d}),i.d(o,"c",function(){return p});var e=i("t3Un");function n(t){return e.a.get("admin/users",t)}function s(t){return e.a.delete("admin/users/"+t)}function l(t){return e.a.post("admin/users",t)}function a(){return e.a.get("admin/groups")}function r(t,o){return e.a.put("admin/users/",t,o)}function c(t){return e.a.get("admin/users/"+t)}function d(t){return e.a.post("admin/users/followSave",t)}function p(t){return e.a.delete("admin/users/followDelete/"+t)}},IVqG:function(t,o,i){"use strict";i.r(o);var e=i("YEIV"),n=i.n(e),s=i("XINx"),l=i("t3Un"),a=i("8/u/"),r=i("P24z"),c=i.n(r),d={name:"designProcess",directives:{elDragDialog:s.a},data:function(){var t;return t={id:null,_canvas:null,processData:null,bgImg:c.a,state:!1,activeName:"first",activeId:"",powerState:!1,typeState:!1,powerName:"",options4:[],options5:[],fontColor:"#409EFF",iconOptions:[{class:"",label:"el-icon-caret-left"},{class:"",label:"el-icon-caret-bottom"},{class:"",label:"el-icon-circle-plus"},{class:"",label:"el-icon-remove"},{class:"",label:"el-icon-circle-check"},{class:"",label:"el-icon-circle-close"},{class:"",label:"el-icon-star-on"},{class:"",label:"el-icon-star-off"},{class:"",label:"el-icon-refresh"},{class:"",label:"el-icon-location"}],operateOptions:[{value:2,label:"禁止会签"},{value:1,label:"允许会签"}],operateOptions1:[{value:2,label:"不允许"},{value:1,label:"允许会退"}],conditionFlag:!1,leftFlag:!0,rightFlag:!0,auto_sponsor_ids:"",auto_sponsor_text:"",scrollVal:0,li:null,auto_role_ids:"",titleArray:["备选步骤","下一步步骤"],transferData:[],processToList:[]},n()(t,"conditionFlag",!1),n()(t,"rule",{process_name:"",process_type:"",tran:[]}),n()(t,"power",{auto_role_ids:"",auto_respon_ids:"",id:[],jid:[],auto_person:""}),n()(t,"conditionForm",{conditionVal:"",symbol:"",val:""}),n()(t,"conditionOptions",[]),n()(t,"bracketsFlag",!1),n()(t,"ybracketsFlag",!0),n()(t,"conditionUlAttr",""),n()(t,"symbolOptions",[{label:"等于",value:"="},{label:"不等于",value:"!="},{label:"大于",value:">"},{label:"小于",value:"<"},{label:"大于等于",value:">="},{label:"小于等于",value:"<="},{label:"包含",value:"contain"},{label:"不包含",value:"noContain"}]),n()(t,"styles",{style_width:null,style_height:null,style_color:"",style_icon:""}),n()(t,"operate",{is_sing:"",is_back:""}),n()(t,"powerOptions",[{value:"1",label:"指定人员"},{value:"2",label:"指定角色"}]),n()(t,"powerOptions1",[]),n()(t,"conditionListOptions",[]),n()(t,"conditionValOptions",[{label:"与",value:"AND"},{label:"或者",value:"OR"}]),t},created:function(){this.getAllGroups(),this.styles.style_color=this.fontColor},mounted:function(){var t=this;this.id=this.$route.params.id;var o=function(){var o=window.innerHeight;t.$refs.flow.style.height=o-84+"px",t.$refs.designContainer.style.height=o-134+"px"};o(),window.addEventListener("resize",function(){o()}),this.init()},methods:{handleRightScroll:function(){var t=this;if(this.rightFlag){this.rightFlag=!1;var o=$(".design-wrapper-box");this.scrollVal=o.scrollLeft();this.scrollVal+o.width()>1920?(_g.toastMsg("warning","已经滑到最右边"),this.scrollVal=1920-o.width()):(this.scrollVal=this.scrollVal+200,o.animate({scrollLeft:this.scrollVal+"px"},300))}setTimeout(function(){t.rightFlag=!0},500)},handleLeftScroll:function(){var t=this;if(this.leftFlag){this.leftFlag=!1;var o=$(".design-wrapper-box");this.scrollVal=o.scrollLeft();this.scrollVal<=0?(this.scrollVal=0,_g.toastMsg("warning","已经滑到最左边")):(this.scrollVal=this.scrollVal-200,o.animate({scrollLeft:this.scrollVal+"px"},500)),setTimeout(function(){t.leftFlag=!0},500)}},liClick:function(){var t=this;this.$nextTick(function(){t.li=document.querySelectorAll(".li");for(var o=function(o){var i=t.li[o];i.addEventListener("click",function(){for(var o=0;o<t.li.length;o++)t.li[o].className=t.li[o].className.replace(" active","");i.className=i.className+" active"},!1)},i=0;i<t.li.length;i++)o(i)})},handleDeleteLi:function(t,o){for(var i=this.$refs.conditionList[o],e=i.querySelectorAll("li"),n=0;n<e.length;n++)if(-1!==e[n].className.indexOf("active")){var s=e[n].getAttribute("data-li-val"),l=e[n].innerText,a=i.getAttribute("data-val");if(-1!==a.indexOf(s)){var r=a.replace(" "+s,"");i.setAttribute("data-val",r)}for(var c=0;c<this.conditionListOptions.length;c++){var d=this.conditionListOptions[c];if(d.id===t){for(var p=0;p<d.conditionForm.condition.length;p++)l===d.conditionForm.condition[p]&&d.conditionForm.condition.splice(p,1),s===d.conditionForm.condition_key[p]&&d.conditionForm.condition_key.splice(p,1);var f=i.getAttribute("data-val");d.conditionUlAttr=f}}-1!==i.lastChild.innerText.substring(i.lastChild.innerText.length-3).indexOf("AND")&&(i.lastChild.innerText=i.lastChild.innerText.replace(" AND","")),-1!==i.lastChild.innerText.substring(i.lastChild.innerText.length-3).indexOf("OR")&&(i.lastChild.innerText=i.lastChild.innerText.replace(" OR",""))}for(var u=0;u<this.conditionListOptions.length;u++){var h=this.conditionListOptions[u];if(0!=h.conditionForm.condition.length){for(var _="",m=0;m<h.conditionForm.condition.length;m++){_=""+_+h.conditionForm.condition[m]+"@vuethink@"}h.form["process_in_set_"+h.id]=_}else h.form["process_in_set_"+h.id]="";if(""!==h.conditionForm.condition_desc?h.form["process_in_desc_"+h.id]=h.conditionForm.condition_desc:h.form["process_in_desc_"+h.id]="",0!=h.conditionForm.condition_key){for(var v="",g=0;g<h.conditionForm.condition_key.length;g++){v=""+v+h.conditionForm.condition_key[g]+"@vuethink@"}h.form["process_in_key_"+h.id]=v}else h.form["process_in_key_"+h.id]=""}this.$forceUpdate()},handleAdd:function(t,o){for(var i={},e=0;e<this.conditionListOptions.length;e++){this.conditionListOptions[e].id===t&&(i=this.conditionListOptions[e])}var n=this.$refs.conditionList[o];if(n.getAttribute("data-val")&&-1!==n.getAttribute("data-val").indexOf(i.form.fieldVal))_g.toastMsg("error","不允许添加重复的条件");else{for(var s=0;s<this.conditionListOptions.length;s++)this.conditionListOptions[s].id===i.id&&(this.conditionListOptions[s].conditionUlAttr=n.getAttribute("data-val")+" "+i.form.fieldVal,n.setAttribute("data-val",this.conditionListOptions[s].conditionUlAttr));if(i.conditionForm.condition.length>0){var l=i.conditionForm.condition.length-1;if("("===i.conditionForm.condition[l]){if(i.conditionForm.condition[l]=i.conditionForm.condition[l]+" "+i.form.fieldVal+i.form.symbolVal+" '"+i.form.inputVal+"'",i.conditionForm.condition_key[i.conditionForm.condition_key.length-1]){var a=""+i.form.fieldVal;i.conditionForm.condition_key.push(a)}this.ybracketsFlag=!1,this.bracketsFlag=!0}else if(-1===i.conditionForm.condition[i.conditionForm.condition.length-1].indexOf("("))for(var r=""+i.form.fieldVal+i.form.symbolVal+" '"+i.form.inputVal+"'",c=0;c<this.conditionListOptions.length;c++){var d=this.conditionListOptions[c];if(d.id===t){var p=d.conditionForm.condition.length-1;this.$set(d.conditionForm.condition,p,d.conditionForm.condition[p]+" "+i.form.conditVal),this.$set(d.conditionForm.condition,d.conditionForm.condition.length,r),this.$set(d.conditionForm.condition_key,d.conditionForm.condition_key.length,i.form.fieldVal)}}else{var f=i.conditionForm.condition.length-1;if(")"!=i.conditionForm.condition[f].charAt(i.conditionForm.condition[f].length-1)){if(this.$set(i.conditionForm.condition,f,i.conditionForm.condition[f]+" "+i.form.conditVal+" "+i.form.fieldVal+i.form.symbolVal+" '"+i.form.inputVal+"'"),console.log("没有闭合"),i.conditionForm.condition[i.conditionForm.condition.length-1]){var u=i.conditionForm.condition_key[i.conditionForm.condition_key.length-1]+" "+i.form.fieldVal;this.$set(i.conditionForm.condition_key,i.conditionForm.condition_key.length-1,u)}else this.$set(i.conditionForm.condition_key,i.conditionForm.condition_key.length-1,i.form.fieldVal);this.ybracketsFlag=!1,this.bracketsFlag=!0}else{for(var h=""+i.form.fieldVal+i.form.symbolVal+" '"+i.form.inputVal+"'",_=0;_<this.conditionListOptions.length;_++){var m=this.conditionListOptions[_];if(m.id===t){console.log("更新了"),console.log(h);var v=m.conditionForm.condition.length-1;this.$set(m.conditionForm.condition,v,m.conditionForm.condition[v]+" "+i.form.conditVal),this.$set(m.conditionForm.condition,m.conditionForm.condition.length,h),this.$set(m.conditionForm.condition_key,m.conditionForm.condition_key.length,i.form.fieldVal)}}this.ybracketsFlag=!0,this.bracketsFlag=!1}}}else for(var g=""+i.form.fieldVal+i.form.symbolVal+" '"+i.form.inputVal+"'",y=0;y<this.conditionListOptions.length;y++){var b=this.conditionListOptions[y];b.id===t&&(console.log(i.form.fieldVal),b.conditionForm.condition.push(g),b.conditionForm.condition_key.push(i.form.fieldVal))}}n.querySelectorAll("li");for(var w="",k="",F=0;F<this.conditionListOptions.length;F++){var O=this.conditionListOptions[F];if(O.id===t)for(var L=0;L<O.conditionForm.condition.length;L++)w=""+w+O.conditionForm.condition[L]+"@vuethink@",k=""+k+O.conditionForm.condition_key[L]+"@vuethink@"}i.form["process_in_set_"+t]=w,i.form["process_in_desc_"+t]=i.form.descVal,i.form["process_in_key_"+t]=k,console.log(this.conditionListOptions),this.$forceUpdate(),this.li=document.querySelectorAll(".li"),this.liClick()},handleEmpty:function(t,o){for(var i=0;i<this.conditionListOptions.length;i++){var e=this.conditionListOptions[i];e.id===t&&(console.log("清空了"),e.conditionForm.condition=[],e.conditionUlAttr="",e.conditionForm.condition_key=[],e.form["process_in_set_"+e.id]="",e.form["process_in_key_"+e.id]="")}this.$forceUpdate()},handleLeftBrackets:function(t,o){if(this.ybracketsFlag){for(var i={},e=0;e<this.conditionListOptions.length;e++){this.conditionListOptions[e].id===t&&(i=this.conditionListOptions[e])}if(0===i.conditionForm.condition.length)_g.toastMsg("error","请先添加条件,再选择括号");else{var n=i.conditionForm.condition.length-1;this.$set(i.conditionForm.condition,n,i.conditionForm.condition[n]+" "+i.form.conditVal),i.conditionForm.condition.push("(")}console.log(this.conditionListOptions),this.ybracketsFlag=!1,this.li=document.querySelectorAll(".li"),this.liClick(),this.$forceUpdate()}},handleRightBrackets:function(t,o){if(this.bracketsFlag){for(var i={},e=0;e<this.conditionListOptions.length;e++){this.conditionListOptions[e].id===t&&(i=this.conditionListOptions[e])}i.conditionForm.condition[i.conditionForm.condition.length-1]=i.conditionForm.condition[i.conditionForm.condition.length-1]+" )",this.ybracketsFlag=!0,this.li=document.querySelectorAll(".li"),this.liClick(),this.$forceUpdate(),console.log(this.conditionListOptions)}else _g.toastMsg("error","请先设置条件再闭合括号")},handleIcon:function(t,o){this.styles.style_icon=o,console.log(t);for(var i=0;i<this.iconOptions.length;i++)this.iconOptions[i].class="";t.class="active"},colorPicker:function(t){this.styles.style_color=this.fontColor},getAllGroups:function(){var t=this;Object(a.e)().then(function(o){"error"!==o&&(t.options5=o.data)})},remoteMethod:function(t){var o=this;if(""!==t){var i={params:{keywords:t}};Object(a.g)(i).then(function(t){o.options4="error"!==t?t.data.list:[]})}},handlePower:function(t){"1"===t?(this.powerName="指定人员",this.powerState=!0,this.typeState=!0,this.auto_role_ids="",this.power.auto_person="4",this.power.jid=[]):"2"===t&&(this.powerName="指定角色",this.powerState=!0,this.typeState=!1,this.power.auto_person="5",this.power.id=[])},handleSaveData:function(){for(var t=this,o=[],i=0;i<this.power.id.length;i++)for(var e=this.power.id[i],n=0;n<this.options4.length;n++)this.options4[n].id===e&&o.push(this.options4[n].username);this.auto_sponsor_text=o.join(",");var s={process_id:this.activeId,flow_id:this.id,process_name:this.rule.process_name,process_type:this.rule.process_type,auto_sponsor_ids:this.power.id.join(","),auto_sponsor_text:this.auto_sponsor_text,auto_role_ids:this.power.jid.join(","),process_condition:this.rule.tran.join(","),is_sing:this.operate.is_sing,is_back:this.operate.is_back,style_width:this.styles.style_width,style_height:this.styles.style_height,style_color:this.styles.style_color,style_icon:this.styles.style_icon,process_to_list:this.transferData,process_to:this.rule.tran,auto_person:this.power.auto_person};console.log(this.conditionListOptions);for(var a=0;a<this.conditionListOptions.length;a++)for(var r in this.conditionListOptions[a].form)-1!==r.indexOf("process_in_set")&&(s[r]=this.conditionListOptions[a].form[r]),-1!==r.indexOf("process_in_desc_")&&(s[r]=this.conditionListOptions[a].form.descVal),-1!==r.indexOf("process_in_key")&&(s[r]=this.conditionListOptions[a].form[r]);console.log(s),l.a.post("flow/flowDesign/save_attribute",s).then(function(o){200===o.code&&(t.state=!1,t.$refs.dialog.close(),t.conditionListOptions=[],_g.toastMsg("success","保存成功"),setTimeout(function(){$("#flowdesign_canvas").children().remove(),t.init()}))})},handleTransfer:function(){this.handleCondition()},handleEdit:function(){var t=this,o=this;l.a.get("flow/flowDesign/attribute?id="+o.activeId+"&op=basic").then(function(i){console.log(i),o.rule.tran=[],o.transferData=[],o.power.id=[],o.power.jid=[],o.options4=[],o.conditionOptions=[],o.activeName="first";var e=i.data.one.process_to;t.processToList=i.data.process_to_list,o.rule.process_name=i.data.one.process_name,o.rule.process_type=i.data.one.process_type;for(var n=0;n<e.length;n++)for(var s=parseInt(e[n]),l=0;l<t.processToList.length;l++)t.processToList[l].id===s&&o.rule.tran.push(s);for(var a=0;a<i.data.process_to_list.length;a++)if(i.data.process_to_list[a].id!==i.data.one.id){var r={key:i.data.process_to_list[a].id,label:i.data.process_to_list[a].process_name,disabled:!1};o.transferData.push(r)}var c=[],d=[];if(""===i.data.one.auto_role_ids)c=[];else for(var p=i.data.one.auto_role_ids.split(","),f=0;f<p.length;f++)c.push(parseInt(p[f]));if(""===i.data.one.auto_sponsor_ids)d=[];else for(var u=i.data.one.auto_sponsor_ids.split(","),h=i.data.one.auto_sponsor_text.split(","),_=0;_<u.length;_++)d.push(parseInt(u[_])),o.options4.push({id:parseInt(u[_]),username:h[_]});0!==c.length&&0===d.length?(o.power.auto_respon_ids="2",o.powerName="指定角色",o.power.jid=c,t.power.auto_person="5",o.powerState=!0,o.typeState=!1):0!==d.length&&0===c.length?(o.power.auto_respon_ids="1",o.powerName="指定人员",o.power.id=d,t.power.auto_person="4",o.powerState=!0,o.typeState=!0):0!==c.length&&0!==d.length?(o.power.auto_respon_ids="1",o.powerName="指定人员",o.power.id=d,t.power.auto_person="4",o.powerState=!0,o.typeState=!0):(o.powerState=!1,o.typeState=!1,o.power.auto_respon_ids="",t.power.auto_person=""),o.operate.is_sing=i.data.one.is_sing,o.operate.is_back=i.data.one.is_back,0===o.operate.is_sing&&(o.operate.is_sing=1),0===o.operate.is_back&&(o.operate.is_back=1),o.styles.style_width=i.data.one.style.width,o.styles.style_height=i.data.one.style.height,o.styles.style_color=i.data.one.style.color,o.styles.style_icon=i.data.one.style.icon;for(var m=0;m<t.iconOptions.length;m++)t.iconOptions[m].class="";for(var v=0;v<t.iconOptions.length;v++)t.iconOptions[v].label===i.data.one.style.icon&&(t.iconOptions[v].class="active");if(t.conditionListOptions=[],t.rule.tran.length>=2){t.conditionFlag=!0;for(var g=0;g<t.rule.tran.length;g++)for(var y=parseInt(t.rule.tran[g]),b=0;b<t.processToList.length;b++)if(t.processToList[b].id===y){var w={id:y,process_name:t.processToList[b].process_name,process_type:t.processToList[b].process_type,form:{fieldVal:"",symbolVal:"",inputVal:"",conditVal:"AND",descVal:"",ulAttr:""}};t.conditionListOptions.push(w)}}else t.conditionFlag=!1;var k=i.data.from;for(var F in k)o.conditionOptions.push({label:k[F],value:F});if("[]"!==i.data.one.out_condition)for(var O=$.parseJSON(i.data.one.out_condition),L=0;L<o.conditionListOptions.length;L++){var x=o.conditionListOptions[L].id;for(var V in O)if(parseInt(V)===x){o.conditionListOptions[L].conditionForm=O[V];for(var S="",C=0;C<O[V].condition_key.length;C++)S=S+" "+O[V].condition_key[C];o.conditionListOptions[L].conditionUlAttr=S,o.conditionListOptions[L].form.descVal=O[V].condition_desc}}else for(var A=0;A<o.conditionListOptions.length;A++)o.conditionListOptions[A].conditionForm={condition:[],condition_key:[],condition_desc:""},o.conditionListOptions[A].conditionUlAttr="";for(var D=0;D<t.conditionListOptions.length;D++)void 0===t.conditionListOptions[D].conditionForm&&(t.conditionListOptions[D].conditionForm={condition:[],condition_desc:"",condition_key:[]},o.conditionListOptions[D].conditionUlAttr="");for(var T=0;T<t.conditionListOptions.length;T++){var N=t.conditionListOptions[T];if(0!=N.conditionForm.condition.length){for(var I="",M=0;M<N.conditionForm.condition.length;M++){I=""+I+N.conditionForm.condition[M]+"@vuethink@"}N.form["process_in_set_"+N.id]=I}if(""!==N.conditionForm.condition_desc&&(N.form["process_in_desc_"+N.id]=N.conditionForm.condition_desc),console.log(N.conditionForm),0!==N.conditionForm.condition_key.length){for(var j="",U=0;U<N.conditionForm.condition_key.length;U++){j=""+j+N.conditionForm.condition_key[U]+"@vuethink@"}N.form["process_in_key_"+N.id]=j}}console.log(t.conditionListOptions),t.liClick()}),o.state=!0},handleCondition:function(){this.rule.tran.length>=2&&(this.conditionFlag=!0);for(var t=[],o=0;o<this.conditionListOptions.length;o++)t.push(this.conditionListOptions[o].id);console.log(t);for(var i=0;i<this.rule.tran.length;i++){var e=this.rule.tran[i];if(-1===t.indexOf(e)){console.log(this.processToList);for(var n=0;n<this.processToList.length;n++)this.processToList[n].id===e&&this.conditionListOptions.push({conditionForm:{condition:[],condition_desc:"",condition_key:[]},conditionUlAttr:"",id:e,process_name:this.processToList[n].process_name,process_type:this.processToList[n].process_type,form:{fieldVal:"",symbolVal:"",inputVal:"",conditVal:"AND",descVal:"",ulAttr:""}})}}console.log(this.conditionListOptions)},init:function(){var t=this,o=($("#alertModal"),$("#attributeModal"));o.on("hidden",function(){$(this).removeData("modal")});$("#leipi_save").bind("click",function(){var t=e._canvas.getProcessInfo();l.a.post("flow/flowDesign/save_canvas",{flow_id:e.id,process_info:t}).then(function(t){200===t.code&&(_g.toastMsg("success","保存成功"),location.reload())})});var i=this.id,e=this;l.a.get("flow/flowDesign/get_process?flow_id="+i).then(function(o){t.processData=$.parseJSON(o.data.process_data),e._canvas=$("#flowdesign_canvas").Flowdesign({processData:t.processData,canvasMenus:{add:function(t){var o=parseInt($("#jqContextMenu").css("left"))-200+"px",i=parseInt($("#jqContextMenu").css("top"))-84+"px";l.a.post("flow/flowDesign/add_process",{flow_id:e.id,left:o,top:i}).then(function(t){200===t.code&&(_g.toastMsg("success","添加成功"),$("#flowdesign_canvas").children().remove(),e.init())})},save:function(t){var o=e._canvas.getProcessInfo();l.a.post("flow/flowDesign/save_canvas",{flow_id:e.id,process_info:o}).then(function(t){200===t.code&&(_g.toastMsg("success","保存成功"),location.reload())})},refresh:function(t){e._canvas.refresh()}},processMenus:{delete:function(t){var o=e._canvas.getActiveId();e.$confirm("确定删除该步骤?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.a.post("flow/flowDesign/delete_process",{process_id:o,flow_id:e.id}).then(function(t){200===t.code?(_g.toastMsg("success","删除成功"),location.reload()):_g.toastMsg("error","删除失败")})})},attribute:function(){e.activeId=e._canvas.getActiveId(),e.handleEdit()}},fnDbClick:function(t){}})})}},computed:{addShow:function(){return _g.getHasRule("flow-flowdesign-add_process")},readShow:function(){return _g.getHasRule("flow-flowdesign-get_process")},attrShow:function(){return _g.getHasRule("flow-flowdesign-attribute")},attrSaveShow:function(){return _g.getHasRule("flow-flowdesign-save_attribute")},canvasSaveShow:function(){return _g.getHasRule("flow-flowdesign-save_canvas")},deleteShow:function(){return _g.getHasRule("flow-flowdesign-delete_process")}}},p=(i("ZGEi"),i("KHd+")),f=Object(p.a)(d,function(){var t=this,o=t.$createElement,i=t._self._c||o;return i("div",{ref:"flow",staticClass:"innerbox design-wrapper-box"},[i("div",{ref:"designProcessContainer",staticClass:"design-process-container",style:"background:#fff url("+t.bgImg+") no-repeat ;"},[t.canvasSaveShow?i("el-button",{attrs:{type:"primary",size:"mini",id:"leipi_save"}},[t._v("保存设计")]):t._e(),t._v(" "),i("div",{staticClass:"scroll-btn-box"},[i("el-button",{attrs:{size:"small"},on:{click:function(o){t.handleLeftScroll()}}},[t._v("向左滑动")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(o){t.handleRightScroll()}}},[t._v("向右滑动")])],1),t._v(" "),i("div",{ref:"designContainer",staticClass:"design-container"},[i("div",{staticStyle:{display:"none"},attrs:{id:"processMenu"}},[i("ul",[t.deleteShow?i("li",{attrs:{id:"delete"}},[i("i",{staticClass:"el-icon-delete"}),t._v(" "),i("span",{staticClass:"_label"},[t._v("删除")])]):t._e(),t._v(" "),t.attrShow?i("li",{attrs:{id:"attribute"}},[i("i",{staticClass:"el-icon-setting"}),t._v(" "),i("span",{staticClass:"_label"},[t._v("属性")])]):t._e()])]),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"canvasMenu"}},[i("ul",[t.addShow?i("li",{attrs:{id:"add"}},[i("i",{staticClass:"el-icon-plus"}),t._v(" "),i("span",{staticClass:"_label"},[t._v("添加步骤")])]):t._e(),t._v(" "),t.canvasSaveShow?i("li",{attrs:{id:"save"}},[i("i",{staticClass:"el-icon-check"}),t._v(" "),i("span",{staticClass:"_label"},[t._v("保存设计")])]):t._e()])]),t._v(" "),i("div",{staticClass:"container mini-layout",attrs:{id:"flowdesign_canvas"}}),t._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"dialog",attrs:{width:"700px",title:"编辑",visible:t.state},on:{"update:visible":function(o){t.state=o}}},[i("el-tabs",{model:{value:t.activeName,callback:function(o){t.activeName=o},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"常规",name:"first"}},[i("el-form",{ref:"rule",staticStyle:{"margin-top":"20px"},attrs:{model:t.rule,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"步骤名称",prop:"process_name"}},[i("el-input",{attrs:{placehold:"请输入步骤名称"},model:{value:t.rule.process_name,callback:function(o){t.$set(t.rule,"process_name","string"==typeof o?o.trim():o)},expression:"rule.process_name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"步骤类型"}},[i("el-radio-group",{model:{value:t.rule.process_type,callback:function(o){t.$set(t.rule,"process_type",o)},expression:"rule.process_type"}},[i("el-radio",{attrs:{label:"is_step"}},[t._v("正常步骤")]),t._v(" "),i("el-radio",{attrs:{label:"is_one"}},[t._v("设为第一步")])],1)],1),t._v(" "),i("el-form-item",[i("el-transfer",{attrs:{titles:t.titleArray,data:t.transferData},on:{change:t.handleTransfer},model:{value:t.rule.tran,callback:function(o){t.$set(t.rule,"tran",o)},expression:"rule.tran"}})],1)],1)],1),t._v(" "),i("el-tab-pane",{attrs:{label:"权限",name:"second"}},[i("el-form",{ref:"power",staticStyle:{"margin-top":"20px"},attrs:{model:t.power,"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"办理人员"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择办理人员"},on:{change:t.handlePower},model:{value:t.power.auto_respon_ids,callback:function(o){t.$set(t.power,"auto_respon_ids",o)},expression:"power.auto_respon_ids"}},t._l(t.powerOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:16}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.powerState,expression:"powerState"}],attrs:{label:t.powerName}},[t.typeState?i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",multiple:"","reserve-keyword":"",placeholder:"请输入关键词搜索","remote-method":t.remoteMethod},model:{value:t.power.id,callback:function(o){t.$set(t.power,"id",o)},expression:"power.id"}},t._l(t.options4,function(t){return i("el-option",{key:t.id,attrs:{label:t.username,value:t.id}})})):i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.power.jid,callback:function(o){t.$set(t.power,"jid",o)},expression:"power.jid"}},t._l(t.options5,function(t){return i("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1)],1)],1)],1)],1),t._v(" "),i("el-tab-pane",{attrs:{label:"操作",name:"three"}},[i("el-form",{ref:"operate",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"80px"},model:{value:t.operate,callback:function(o){t.operate=o},expression:"operate"}},[i("el-form-item",{attrs:{label:"会签方式"}},[i("el-select",{attrs:{placeholder:"请选择会签方式"},model:{value:t.operate.is_sing,callback:function(o){t.$set(t.operate,"is_sing",o)},expression:"operate.is_sing"}},t._l(t.operateOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"回退方式"}},[i("el-select",{attrs:{placeholder:"请选择回退方式"},model:{value:t.operate.is_back,callback:function(o){t.$set(t.operate,"is_back",o)},expression:"operate.is_back"}},t._l(t.operateOptions1,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-tab-pane",{attrs:{label:"样式",name:"four"}},[i("el-form",{ref:"styles",staticStyle:{"margin-top":"20px"},attrs:{"label-width":"80px"},model:{value:t.styles,callback:function(o){t.styles=o},expression:"styles"}},[i("el-row",{attrs:{type:"flex",align:"middle",gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"步骤宽度"}},[i("el-input",{model:{value:t.styles.style_width,callback:function(o){t.$set(t.styles,"style_width",o)},expression:"styles.style_width"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"步骤高度"}},[i("el-input",{model:{value:t.styles.style_height,callback:function(o){t.$set(t.styles,"style_height",o)},expression:"styles.style_height"}})],1)],1)],1),t._v(" "),i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"字体颜色"}},[i("el-input",{model:{value:t.styles.style_color,callback:function(o){t.$set(t.styles,"style_color",o)},expression:"styles.style_color"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-color-picker",{on:{change:function(o){t.colorPicker()}},model:{value:t.fontColor,callback:function(o){t.fontColor=o},expression:"fontColor"}})],1)],1),t._v(" "),i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{label:"图标"}},[i("el-input",{model:{value:t.styles.style_icon,callback:function(o){t.$set(t.styles,"style_icon",o)},expression:"styles.style_icon"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:15,type:"flex",align:"middle"}},[i("el-row",{attrs:{type:"flex",align:"middle"}},t._l(t.iconOptions,function(o){return i("i",{class:o.label+" i-block "+o.class,on:{click:function(i){t.handleIcon(o,o.label)}}})}))],1)],1)],1)],1),t._v(" "),t.conditionFlag?i("el-tab-pane",{attrs:{label:"转出条件",name:"five"}},[i("div",{staticStyle:{width:"100%",height:"500px",position:"relative"}},[i("div",{staticClass:"top-bg"}),t._v(" "),i("div",{staticClass:"bottom-bg"}),t._v(" "),i("div",{staticClass:"innerbox"},[i("div",{staticClass:"scrollContent"},[i("el-row",{staticStyle:{height:"36px","line-height":"36px","margin-top":"20px","border-bottom":"#DCDFE6 1px solid"},attrs:{gutter:10}},[i("el-col",{attrs:{span:4}},[t._v("\n                      转出步骤\n                    ")]),t._v(" "),i("el-col",{attrs:{span:20}},[t._v("\n                      转出条件设置\n                    ")])],1),t._v(" "),i("el-form",{ref:"conditionForm",attrs:{model:t.conditionForm}},t._l(t.conditionListOptions,function(o,e){return i("el-row",{key:o.id,staticClass:"condition-ul",attrs:{gutter:10}},[i("el-col",{attrs:{span:4}},[t._v(t._s(o.process_name))]),t._v(" "),i("el-col",{attrs:{span:20}},[i("el-row",{attrs:{gutter:8}},[i("el-col",{attrs:{span:6}},[i("el-select",{model:{value:o.form.fieldVal,callback:function(i){t.$set(o.form,"fieldVal",i)},expression:"item.form.fieldVal"}},t._l(t.conditionOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-select",{model:{value:o.form.symbolVal,callback:function(i){t.$set(o.form,"symbolVal",i)},expression:"item.form.symbolVal"}},t._l(t.symbolOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-input",{model:{value:o.form.inputVal,callback:function(i){t.$set(o.form,"inputVal",i)},expression:"item.form.inputVal"}})],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-select",{model:{value:o.form.conditVal,callback:function(i){t.$set(o.form,"conditVal",i)},expression:"item.form.conditVal"}},t._l(t.conditionValOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"12px"},attrs:{gutter:8}},[i("el-col",[i("el-button",{attrs:{size:"small"},on:{click:function(i){t.handleLeftBrackets(o.id,e)}}},[t._v("(")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:function(i){t.handleRightBrackets(o.id,e)}}},[t._v(")")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){t.handleAdd(o.id,e)}}},[t._v("新增")])],1)],1),t._v(" "),i("el-row",{attrs:{gutter:8}},[i("el-col",{attrs:{span:18}},[i("ul",{ref:"conditionList",refInFor:!0,staticClass:"conditionList",staticStyle:{"min-height":"90px"},attrs:{"data-val":o.conditionUlAttr}},t._l(o.conditionForm.condition,function(e,n){return i("li",{staticClass:"li",attrs:{"data-li-val":o.conditionForm.condition_key[n]}},[t._v("\n                                "+t._s(e)+"\n                              ")])}))]),t._v(" "),i("el-col",{staticStyle:{"padding-top":"15px"},attrs:{span:6}},[i("span",[i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.handleDeleteLi(o.id,e)}}},[t._v("删除")])],1),t._v(" "),i("span",[i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(i){t.handleEmpty(o.id,e)}}},[t._v("清空")])],1)])],1),t._v(" "),i("el-row",{attrs:{gutter:10}},[i("el-col",[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"不符合条件时的提示"}},[i("el-input",{model:{value:o.form.descVal,callback:function(i){t.$set(o.form,"descVal",i)},expression:"item.form.descVal"}})],1)],1)],1)],1)],1)}))],1)])])]):t._e()],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"20px"}},[t.attrSaveShow?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){t.handleSaveData()}}},[t._v("保存")]):t._e()],1)],1)],1)],1)])},[],!1,null,"3f73f5c7",null);f.options.__file="index.vue";o.default=f.exports},P24z:function(t,o,i){t.exports=i.p+"static/img/bg.240164c.png"},ZGEi:function(t,o,i){"use strict";var e=i("qC7t");i.n(e).a},qC7t:function(t,o,i){}}]);