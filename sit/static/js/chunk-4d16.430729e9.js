(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4d16"],{"8T0q":function(e,t,n){"use strict";n.d(t,"r",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return o}),n.d(t,"h",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return m}),n.d(t,"l",function(){return g}),n.d(t,"q",function(){return y}),n.d(t,"m",function(){return _}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return w}),n.d(t,"p",function(){return b});var a=n("t3Un");function r(e){return a.a.get("insurance/company",e)}function i(e){return a.a.post("insurance/company",e)}function s(e){return a.a.delete("insurance/company/"+e)}function o(e){return a.a.get("insurance/company/"+e)}function u(e,t){return a.a.put("insurance/company/",e,t)}function c(e){return a.a.post("insurance/companyRate",e)}function l(e){return a.a.get("insurance/companyRate/"+e)}function d(e,t){return a.a.put("insurance/companyRate/",e,t)}function f(e){return a.a.delete("insurance/companyRate/"+e)}function p(e){return a.a.post("insurance/ask",e)}function h(e){return a.a.delete("insurance/ask/"+e)}function m(e){return a.a.get("insurance/ask/"+e)}function g(e,t){return a.a.put("insurance/ask/",e,t)}function y(e){return a.a.get("insurance/ask/logIndex",e)}function _(e){return a.a.post("insurance/ask/logSave",e)}function v(e){return a.a.delete("insurance/ask/logDelete/?id="+e,"")}function w(e){return a.a.get("insurance/ask/logRead/?id="+e)}function b(e,t){return a.a.put("insurance/ask/logUpdate/",e,t)}},KJVh:function(e,t,n){"use strict";n.r(t);var a=n("8T0q"),r={name:"noCarInquiryList",mixins:[n("pCtG").a],filters:{statusFilter:function(e){switch(e){case 1:return"primary";case 2:return"warning";case 3:return"info";case 4:return"success";case 5:return"danger"}},status:function(e){switch(e){case 1:return"有意向";case 2:return"报价中";case 3:return"投保中";case 4:return"已完成";case 5:return"已关闭"}}},data:function(){return{tableData:[],loading:!1,tableHeight:null,update:!1,searchForm:{keywords:"",salesman:"",start:"",end:"",queryCheck:0},userData:{type:1}}},created:function(){var e=this;bus.$on("noCarInquiryList",function(){e.update=!e.update})},methods:{handleQuery:function(){this.queryCheck=1,this.update=!this.update},handleRizhi:function(e){this.$router.push({name:"noCarInquiryLog",params:{id:e.row.id},query:{pageClick:_g.editRefresh("noCarInquiryLog")}})},handleEdit:function(e){this.$router.push({name:"noCarInquiryEdit",params:{id:e.row.id},query:{pageClick:_g.editRefresh("noCarInquiryEdit")}})},handleDelete:function(e){var t=this;this.$confirm("确认删除该流转单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.j)(e.row.id).then(function(e){"error"!==e&&(_g.toastMsg("success","删除成功"),setTimeout(function(){t.update=!t.update}))})})},handlePaging:function(e){var t=this;this.loading=!0,setTimeout(function(){t.tableData=e.map(function(e){return e.isEditLoading=!1,e.isDeleteLoading=!1,e}),t.loading=!t.loading,console.log(t.tableData)},300)}},computed:{indexShow:function(){return _g.getHasRule("insurance-ask-index")},addShow:function(){return _g.getHasRule("insurance-ask-save")},readShow:function(){return _g.getHasRule("insurance-ask-read")},deleteShow:function(){return _g.getHasRule("insurance-ask-delete")}}},i=n("KHd+"),s=Object(i.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mainContainer",staticClass:"app_main_container"},[n("div",{staticClass:"page_table_box"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入客户单位查询"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}}),e._v(" "),n("user-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",url:"admin/users",data:e.userData,placeholder:"请输入业务员"},model:{value:e.searchForm.salesman,callback:function(t){e.$set(e.searchForm,"salesman",t)},expression:"searchForm.salesman"}}),e._v(" "),n("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择开始日期"},model:{value:e.searchForm.start,callback:function(t){e.$set(e.searchForm,"start",t)},expression:"searchForm.start"}}),e._v(" "),n("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date",size:"small","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择结束日期"},model:{value:e.searchForm.end,callback:function(t){e.$set(e.searchForm,"end",t)},expression:"searchForm.end"}}),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",size:"small"},on:{click:e.handleQuery}},[e._v("查询")]),e._v(" "),e.addShow?n("router-link",{staticClass:"filter-item",attrs:{to:{name:"noCarInquiryAdd"}}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"}},[e._v("添加记录")])],1):e._e(),e._v(" "),n("a",{staticClass:"filter-item",attrs:{href:e.urlAds+"insurance/export/ask_export?start="+e.searchForm.start+"&end="+e.searchForm.end+"&keywords="+e.searchForm.keywords+"&salesman="+e.searchForm.salesman}},[n("el-button",{attrs:{type:"primary",size:"small"}},[e._v("导出")])],1)],1),e._v(" "),e.indexShow?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","element-loading-text":"数据加载中","max-height":e.tableHeight}},[n("el-table-column",{attrs:{label:"填写日期",prop:"write_date","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"业务员",prop:"salesman_name","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"客户/单位",prop:"customer","min-width":"260"}}),e._v(" "),n("el-table-column",{attrs:{label:"咨询内容",prop:"ask_content","min-width":"300"}}),e._v(" "),n("el-table-column",{attrs:{label:"状态","min-width":"84"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[n("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v("\n                        "+e._s(e._f("status")(t.row.status))+"\n                        ")])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",prop:"write_date",width:"55"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("operates",[e.readShow?n("operate",{attrs:{label:"日志跟踪",svgIcon:"",icon:"operate-see"},on:{change:function(n){e.handleRizhi(t)}}}):e._e(),e._v(" "),e.readShow?n("operate",{attrs:{label:"编辑",svgIcon:"",icon:"operate-edit"},on:{change:function(n){e.handleEdit(t)}}}):e._e(),e._v(" "),e.deleteShow?n("operate",{attrs:{label:"删除",svgIcon:"",icon:"operate-delete"},on:{change:function(n){e.handleDelete(t)}}}):e._e()],1)]}}])})],1):e._e(),e._v(" "),n("div",{ref:"btmGroup",staticStyle:{height:"70px"}},[n("el-row",{staticClass:"pos_rel",staticStyle:{height:"70px"},attrs:{type:"flex",align:"middle",justify:"end"}},[n("paging",{attrs:{type:"insurance/ask",updateType:"policy",update:e.update,pagingdata:e.searchForm},on:{loadingChange:function(t){e.loading=!0},policyPaging:e.handlePaging}})],1)],1)],1)])},[],!1,null,null,null);s.options.__file="list.vue";t.default=s.exports},pCtG:function(e,t,n){"use strict";var a=n("7Qib");t.a={mounted:function(){var e=this;this.valHandle(),this.__resizeMainHanlder=Object(a.a)(function(){e.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(e,t){var n=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=n}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}}}]);