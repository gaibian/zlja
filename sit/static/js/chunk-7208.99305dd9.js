(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7208"],{"8/u/":function(t,e,n){"use strict";n.d(e,"g",function(){return i}),n.d(e,"h",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"d",function(){return u}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return p});var a=n("t3Un");function i(t){return a.a.get("admin/users",t)}function r(t){return a.a.delete("admin/users/"+t)}function s(t){return a.a.post("admin/users",t)}function o(){return a.a.get("admin/groups")}function l(t,e){return a.a.put("admin/users/",t,e)}function u(t){return a.a.get("admin/users/"+t)}function c(t){return a.a.post("admin/users/followSave",t)}function p(t){return a.a.delete("admin/users/followDelete/"+t)}},"8T0q":function(t,e,n){"use strict";n.d(e,"r",function(){return i}),n.d(e,"a",function(){return r}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return l}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return c}),n.d(e,"e",function(){return p}),n.d(e,"c",function(){return d}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return g}),n.d(e,"k",function(){return f}),n.d(e,"l",function(){return _}),n.d(e,"q",function(){return h}),n.d(e,"m",function(){return y}),n.d(e,"n",function(){return b}),n.d(e,"o",function(){return v}),n.d(e,"p",function(){return k});var a=n("t3Un");function i(t){return a.a.get("insurance/company",t)}function r(t){return a.a.post("insurance/company",t)}function s(t){return a.a.delete("insurance/company/"+t)}function o(t){return a.a.get("insurance/company/"+t)}function l(t,e){return a.a.put("insurance/company/",t,e)}function u(t){return a.a.post("insurance/companyRate",t)}function c(t){return a.a.get("insurance/companyRate/"+t)}function p(t,e){return a.a.put("insurance/companyRate/",t,e)}function d(t){return a.a.delete("insurance/companyRate/"+t)}function m(t){return a.a.post("insurance/ask",t)}function g(t){return a.a.delete("insurance/ask/"+t)}function f(t){return a.a.get("insurance/ask/"+t)}function _(t,e){return a.a.put("insurance/ask/",t,e)}function h(t){return a.a.get("insurance/ask/logIndex",t)}function y(t){return a.a.post("insurance/ask/logSave",t)}function b(t){return a.a.delete("insurance/ask/logDelete/?id="+t,"")}function v(t){return a.a.get("insurance/ask/logRead/?id="+t)}function k(t,e){return a.a.put("insurance/ask/logUpdate/",t,e)}},x3Ox:function(t,e,n){"use strict";n.r(e);var a=n("YEIV"),i=n.n(a),r=n("8T0q"),s=n("t3Un"),o=n("8/u/"),l={name:"commissionsList",filters:{commissionStatus:function(t){switch(t){case 1:return"已发放";case 0:case null:return"未结算";case 2:return"不发佣"}}},data:function(){var t;return t={pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}},{text:"今天",onClick:function(t){var e=new Date,n=new Date;t.$emit("pick",[n,e])}}]},tableData:[],loading:!0,update:!1,pagingData:null,companyOptions:[],statusOptions:[],userOptions:[],queryTime:"",typeOptions:[{label:"保单",index:"保单"},{label:"批单",index:"批单"}]},i()(t,"statusOptions",[{label:"未结算",index:0},{label:"已结算",index:1},{label:"不发佣",index:2}]),i()(t,"commissionStatusOptions",[{label:"已发放",id:1},{label:"未结算",id:0}]),i()(t,"pagingData",{company_id:"",start_date:"",end_date:"",queryCheck:0,commission_status:"",type:"",user_id:""}),t},created:function(){var t=this;Object(r.r)({params:{type:1}}).then(function(e){"error"!==e&&(t.companyOptions=e.data.list)})},methods:{handleFaYong:function(){var t=this,e={ids:this.statusOptions.toString(",")};s.a.post("insurance/policy/handle_uncommission",e).then(function(e){"error"!==e&&(_g.toastMsg("success","操作成功"),t.update=!t.update)})},handleTime:function(t){this.pagingData.start_date=t[0],this.pagingData.end_date=t[1]},remoteMethod:function(t){var e=this;if(""!==t){var n={params:{keywords:t,type:1}};Object(o.g)(n).then(function(t){e.userOptions="error"!==t?t.data.list:[]})}else console.warn("请输入关键词")},handleStatus:function(){var t=this,e={ids:this.statusOptions.toString(",")};s.a.post("insurance/policy/handle_commission",e).then(function(e){"error"!==e&&(_g.toastMsg("success","结算成功"),t.update=!t.update)})},handleSelectionChange:function(t){var e=this;this.statusOptions=[],_(t).forEach(function(t){e.statusOptions.push(t.id)})},handleSearch:function(){this.loading=!0,this.pagingData.queryCheck=1,this.update=!this.update},handlePaging:function(t){var e=this;console.log(t),this.loading=!0,setTimeout(function(){e.tableData=t.map(function(t){return t}),e.loading=!e.loading},300)}}},u=n("KHd+"),c=Object(u.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app_main_container"},[n("div",{staticClass:"page_table_box"},[n("div",{ref:"topAdd",staticClass:"filter-container"},[n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-method":t.remoteMethod,placeholder:"请输入代理人查询"},model:{value:t.pagingData.user_id,callback:function(e){t.$set(t.pagingData,"user_id","string"==typeof e?e.trim():e)},expression:"pagingData.user_id"}},t._l(t.userOptions,function(t){return n("el-option",{key:t.id,attrs:{label:t.realname,value:t.id}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",clearable:"",placeholder:"请选择保险公司名称查询"},model:{value:t.pagingData.company_id,callback:function(e){t.$set(t.pagingData,"company_id",e)},expression:"pagingData.company_id"}},t._l(t.companyOptions,function(t){return n("el-option",{key:t.id,attrs:{label:t.company_name,value:t.id}})})),t._v(" "),n("el-date-picker",{staticStyle:{width:"300px","vertical-align":"middle","margin-right":"6px","margin-bottom":"10px"},attrs:{type:"daterange",align:"right","unlink-panels":"",size:"small","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},on:{change:t.handleTime},model:{value:t.queryTime,callback:function(e){t.queryTime=e},expression:"queryTime"}}),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择状态"},model:{value:t.pagingData.commission_status,callback:function(e){t.$set(t.pagingData,"commission_status",e)},expression:"pagingData.commission_status"}},t._l(t.statusOptions,function(t){return n("el-option",{key:t.index,attrs:{label:t.label,value:t.index}})})),t._v(" "),n("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择类型"},model:{value:t.pagingData.type,callback:function(e){t.$set(t.pagingData,"type",e)},expression:"pagingData.type"}},t._l(t.typeOptions,function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:t.index}})})),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-search",size:"small"},on:{click:t.handleSearch}},[t._v("查询")]),t._v(" "),n("a",{staticClass:"filter-item",attrs:{href:t.urlAds+"insurance/export/commission_report_export?commission_status="+t.pagingData.commission_status+"&user_id="+t.pagingData.user_id+"&company_id="+t.pagingData.company_id+"&start="+t.pagingData.start_date+"&end="+t.pagingData.end_date}},[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("导出")])],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"数据加载中"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",fixed:"left",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{label:"代理人",prop:"realname","min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"保单号",prop:"policy_number","min-width":"230"}}),t._v(" "),n("el-table-column",{attrs:{label:"保费",prop:"premium"}}),t._v(" "),n("el-table-column",{attrs:{label:"车船税",prop:"ship_tax_fee"}}),t._v(" "),n("el-table-column",{attrs:{label:"印花税",prop:"stamp_tax_fee"}}),t._v(" "),n("el-table-column",{attrs:{label:"保险公司",prop:"company_name","min-width":"230"}}),t._v(" "),n("el-table-column",{attrs:{label:"佣金率",prop:"rate"}}),t._v(" "),n("el-table-column",{attrs:{label:"佣金",prop:"commission"}}),t._v(" "),n("el-table-column",{attrs:{label:"净保费",prop:"net_premium"}}),t._v(" "),n("el-table-column",{attrs:{label:"增值税",prop:"tax"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:1===e.row.commission_status?"":"warning"}},[t._v("\n            "+t._s(t._f("commissionStatus")(e.row.commission_status))+"\n            ")])]}}])})],1),t._v(" "),n("div",{ref:"btmGroup",staticStyle:{height:"60px"}},[n("el-row",{staticStyle:{height:"60px"},attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("div",[n("el-button",{attrs:{size:"small"},on:{click:t.handleStatus}},[t._v("批量结算")]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:t.handleFaYong}},[t._v("批量不发佣")])],1),t._v(" "),n("paging",{attrs:{type:"insurance/report/commission_report",updateType:"ledger",pagingdata:t.pagingData,update:t.update},on:{loadingChange:function(e){t.loading=!0},ledgerPaging:t.handlePaging}})],1)],1)],1)])},[],!1,null,null,null);c.options.__file="list.vue";e.default=c.exports}}]);