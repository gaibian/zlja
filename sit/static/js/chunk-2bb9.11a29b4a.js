(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2bb9"],{"8/u/":function(e,t,a){"use strict";a.d(t,"g",function(){return n}),a.d(t,"h",function(){return l}),a.d(t,"b",function(){return o}),a.d(t,"e",function(){return i}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"c",function(){return d});var r=a("t3Un");function n(e){return r.a.get("admin/users",e)}function l(e){return r.a.delete("admin/users/"+e)}function o(e){return r.a.post("admin/users",e)}function i(){return r.a.get("admin/groups")}function s(e,t){return r.a.put("admin/users/",e,t)}function c(e){return r.a.get("admin/users/"+e)}function u(e){return r.a.post("admin/users/followSave",e)}function d(e){return r.a.delete("admin/users/followDelete/"+e)}},OwBi:function(e,t,a){"use strict";var r=a("yyZ0");a.n(r).a},dToh:function(e,t,a){"use strict";a.r(t);var r=a("8/u/"),n=a("haJh"),l=a("rJi+"),o={name:"usersAdd",data:function(){return{postForm:{status:"draft"},isLoading:!1,typeFlag:!1,form:{username:"",password:"",realname:"",structure_id:null,remark:"",groups:[],pid:null,employee_number:"",organization_id:null,idcard_num:null,gender:"",birthday:"",bank:"",bank_card_num:null,bank_card_name:"",join_date:"",manual_team_id:"",userlevel:"",type:""},manual_team_options:[],isBtnActive:!1,typeOptions:[{label:"财险",id:1},{label:"寿险",id:2},{label:"内勤",id:3}],genderOptions:[{label:"男",id:1},{label:"女",id:2}],options:[{label:"顶级机构",id:0,name:"顶级机构",children:[]}],treeVal:"请选择上级机构",defaultProps:{children:"children",label:"label"},pidOptions:[{realname:"无",id:0}],orgsOptions:[],groupOptions:[],userLevelOptions:[{id:1,label:"团队长"},{id:2,label:"总监"},{id:3,label:"普通代理人"}],selectedGroups:[],selectedIds:[]}},methods:{remoteMethod:function(e){var t=this;if(""!==e){var a={params:{keywords:e,type:this.form.type}};Object(r.g)(a).then(function(e){"error"!==e?(t.pidOptions=e.data.list,console.log(t.pidOptions)):t.pidOptions=[]})}else console.warn("请输入关键词")},handleEmpty:function(){this.form={username:"",password:"",realname:"",structure_id:null,remark:"",groups:[],pid:null,employee_number:"",organization_id:null,idcard_num:null,gender:"",birthday:"",bank:"",bank_card_num:null,bank_card_name:"",join_date:"",manual_team_id:"",userlevel:"",type:""},this.treeVal="请选择上级机构"},handleType:function(){""!==this.form.type?(console.log(this.form.type),this.getMechanismList()):(this.options=[],this.typeFlag=!1)},handleNodeClick:function(e){this.isBtnActive=!0,this.treeVal=e.name,this.form.organization_id=e.id},selectCheckbox:function(){var e=this,t=!1;return _(this.groupOptions).forEach(function(t){e.selectedGroups.toString().indexOf(t.title)>-1&&e.selectedIds.push(t.id)}),this.selectedIds.length&&(this.form.groups=_.cloneDeep(this.selectedIds),t=!0),this.selectedIds=[],t},add:function(e){var t=this;if(!this.selectCheckbox())return _g.toastMsg("warning","请选择用户组"),!1;this.$refs.form.validate(function(e){e&&(t.isLoading=!t.isLoading,Object(r.b)(t.form).then(function(e){"error"!==e&&(_g.toastMsg("success","添加成功"),_g.clearVuex("setUsers"),setTimeout(function(){t.addRefresh("usersList")},1500)),t.isLoading=!t.isLoading}))})},getAllGroups:function(){var e=this;Object(r.e)().then(function(t){"error"!==t&&(e.groupOptions=t.data)})},getMechanismList:function(){var e=this;Object(n.f)(this.form.type).then(function(t){"error"!==t&&(e.options[0].children=t.data,e.typeFlag=!0)})},getManualTeamList:function(){var e=this;Object(l.d)().then(function(t){"error"!==t&&(e.manual_team_options=t.data.list)})}},created:function(){this.getAllGroups(),this.getManualTeamList()}},i=(a("OwBi"),a("KHd+")),s=Object(i.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sticky",{attrs:{className:"sub-navbar "+e.postForm.status,stickyTop:84}},[a("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[a("h1",{staticClass:"page-title-box"},[e._v("\n        代理人"),a("em"),a("span",[e._v("/添加列表项")])]),e._v(" "),a("div",[a("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(t){e.handleEmpty()}}},[e._v("清空")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check",loading:e.isLoading},on:{click:function(t){e.add("form")}}},[e._v("保存")])],1)])]),e._v(" "),a("div",{staticClass:"app_main_content"},[a("el-form",{ref:"form",attrs:{size:"medium",model:e.form,"label-width":"100px","label-position":"top"}},[a("div",{staticClass:"block-box"},[a("el-row",{staticClass:"block-header-box"},[a("i"),e._v("基本信息")]),e._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:45}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{maxlength:12,placeholder:"请输入用户名",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"==typeof t?t.trim():t)},expression:"form.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"==typeof t?t.trim():t)},expression:"form.password"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[a("el-input",{attrs:{placeholder:"请输入真实姓名",clearable:""},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname","string"==typeof t?t.trim():t)},expression:"form.realname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"手工团队",prop:"manual_team_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.manual_team_id,callback:function(t){e.$set(e.form,"manual_team_id",t)},expression:"form.manual_team_id"}},e._l(e.manual_team_options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:45}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"职级",prop:"userlevel"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职级",clearable:""},model:{value:e.form.userlevel,callback:function(t){e.$set(e.form,"userlevel",t)},expression:"form.userlevel"}},e._l(e.userLevelOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"代理人编号",prop:"employee_number"}},[a("el-input",{attrs:{placeholder:"请输入代理人编号",clearable:""},model:{value:e.form.employee_number,callback:function(t){e.$set(e.form,"employee_number","string"==typeof t?t.trim():t)},expression:"form.employee_number"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"身份证",prop:"idcard_num"}},[a("el-input",{attrs:{placeholder:"请输入身份证号码",clearable:""},model:{value:e.form.idcard_num,callback:function(t){e.$set(e.form,"idcard_num","string"==typeof t?t.trim():t)},expression:"form.idcard_num"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"性别",prop:"gender"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},e._l(e.genderOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.id}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:45}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:"","value-format":"yyyy-MM-dd",placeholder:"请选择生日日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择类型",clearable:""},on:{change:e.handleType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[e.typeFlag?a("el-form-item",{attrs:{label:"机构"}},[a("multi-picker",{attrs:{options:e.options,width:360,treeVal:e.treeVal},on:{treeClick:e.handleNodeClick}})],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[e.typeFlag?a("el-form-item",{attrs:{label:"上级",prop:"pid"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"","remote-method":e.remoteMethod,placeholder:"请输入上级进行搜索"},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},e._l(e.pidOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.realname,value:e.id}})}))],1):e._e()],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"block-box"},[a("el-row",{staticClass:"block-header-box"},[a("i"),e._v("其他信息")]),e._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:45}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开户行",prop:"bank"}},[a("el-input",{attrs:{placeholder:"请输入开户行名称",clearable:""},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank","string"==typeof t?t.trim():t)},expression:"form.bank"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"卡号",prop:"bank_card_num"}},[a("el-input",{attrs:{placeholder:"请输入银行卡号",clearable:""},model:{value:e.form.bank_card_num,callback:function(t){e.$set(e.form,"bank_card_num","string"==typeof t?t.trim():t)},expression:"form.bank_card_num"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"开户名",prop:"bank_card_name"}},[a("el-input",{attrs:{placeholder:"请输入开户名",clearable:""},model:{value:e.form.bank_card_name,callback:function(t){e.$set(e.form,"bank_card_name","string"==typeof t?t.trim():t)},expression:"form.bank_card_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"入司时间",prop:"join_date"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择入司时间"},model:{value:e.form.join_date,callback:function(t){e.$set(e.form,"join_date",t)},expression:"form.join_date"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请填写备注信息",border:"",clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark","string"==typeof t?t.trim():t)},expression:"form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户组",prop:"groups"}},[a("el-checkbox-group",{model:{value:e.selectedGroups,callback:function(t){e.selectedGroups=t},expression:"selectedGroups"}},e._l(e.groupOptions,function(e,t){return a("el-checkbox",{key:t,staticClass:"form-checkbox",attrs:{label:e.title}})}))],1)],1)],1)])],1)],1)},[],!1,null,"4766c418",null);s.options.__file="add.vue";t.default=s.exports},haJh:function(e,t,a){"use strict";a.d(t,"f",function(){return n}),a.d(t,"a",function(){return l}),a.d(t,"e",function(){return o}),a.d(t,"d",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return c});var r=a("t3Un");function n(e){return r.a.get("admin/organization?type="+e)}function l(e){return r.a.post("admin/organization",e)}function o(e){return r.a.get("admin/organization/"+e)}function i(e,t){return r.a.put("admin/organization/",e,t)}function s(e){return r.a.delete("admin/organization/"+e)}function c(e){return r.a.get("admin/organization/getChildArea/"+e)}},"rJi+":function(e,t,a){"use strict";a.d(t,"d",function(){return n}),a.d(t,"e",function(){return l}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"b",function(){return s});var r=a("t3Un");function n(e){return r.a.get("admin/manualTeam",e)}function l(e){return r.a.delete("admin/manualTeam/"+e)}function o(e){return r.a.post("admin/manualTeam",e)}function i(e){return r.a.get("admin/manualTeam/"+e)}function s(e,t){return r.a.put("admin/manualTeam/",e,t)}},yyZ0:function(e,t,a){}}]);