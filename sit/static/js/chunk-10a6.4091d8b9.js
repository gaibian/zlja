(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-10a6"],{"2DYP":function(e,t,a){"use strict";a.r(t);var n=a("haJh"),r={name:"lifeMechanismAdd",data:function(){return{postForm:{status:"draft"},ruleForm:{name:"",area:"",super:""},options:[{label:"顶级机构",id:0,name:"顶级机构",children:[]}],treeVal:"请选择上级机构",defaultProps:{children:"children",label:"label"},props:{value:"id"},isLoading:!1,areaList:[],rules:{name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],areaList:[{required:!0,message:"请选择地区",trigger:"change"}],superOrignList:[{required:!0,message:"请选择上级机构",trigger:"change"}]}}},created:function(){this.init()},methods:{handleEmpty:function(){this.form={name:"",area:"",super:""},this.treeVal="请选择上级机构"},init:function(){var e=this;Object(n.f)(2).then(function(t){e.options[0].children=t.data}),Object(n.b)(0).then(function(t){e.areaList=t.data.list})},handleNodeClick:function(e){this.treeVal=e.name,this.ruleForm.super=e.id},submitForm:function(e){var t=this;this.$refs.ruleForm.validate(function(e){if(e){t.isLoading=!t.isLoading;var a={name:t.ruleForm.name,pid:Number(t.ruleForm.super),area_id:Number(t.ruleForm.area),type:2};Object(n.a)(a).then(function(e){"error"!==e&&(_g.toastMsg("success","添加成功"),setTimeout(function(){t.addRefresh("mechanismList"),t.isLoading=!t.isLoading}))})}})}}},i=(a("ySuC"),a("KHd+")),o=Object(i.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("sticky",{attrs:{className:"sub-navbar "+e.postForm.status,stickyTop:84}},[a("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[a("h1",{staticClass:"page-title-box"},[e._v("\n        机构管理"),a("em"),a("span",[e._v("/添加列表项")])]),e._v(" "),a("div",[a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close"},on:{click:function(t){e.handleEmpty()}}},[e._v("清空表单")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",loading:e.isLoading},on:{click:e.submitForm}},[e._v("保存")])],1)])]),e._v(" "),a("div",{staticClass:"app_main_content"},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px","label-position":"top"}},[a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),e._v("\n          基本信息\n        ")]),e._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入机构名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"上级机构",prop:"super"}},[a("multi-picker",{attrs:{options:e.options,width:360,treeVal:e.treeVal},on:{treeClick:e.handleNodeClick}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"请选择地区",prop:"area"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择地区",clearable:""},model:{value:e.ruleForm.area,callback:function(t){e.$set(e.ruleForm,"area",t)},expression:"ruleForm.area"}},e._l(e.areaList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1)],1)],1)],1)])])],1)],1)},[],!1,null,"065dc35a",null);o.options.__file="add.vue";t.default=o.exports},haJh:function(e,t,a){"use strict";a.d(t,"f",function(){return r}),a.d(t,"a",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"d",function(){return s}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return u});var n=a("t3Un");function r(e){return n.a.get("admin/organization?type="+e)}function i(e){return n.a.post("admin/organization",e)}function o(e){return n.a.get("admin/organization/"+e)}function s(e,t){return n.a.put("admin/organization/",e,t)}function l(e){return n.a.delete("admin/organization/"+e)}function u(e){return n.a.get("admin/organization/getChildArea/"+e)}},rS8m:function(e,t,a){},ySuC:function(e,t,a){"use strict";var n=a("rS8m");a.n(n).a}}]);