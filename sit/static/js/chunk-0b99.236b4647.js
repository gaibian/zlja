(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b99"],{"29WY":function(t,e,a){"use strict";var n=a("VOaP");a.n(n).a},"6Dsu":function(t,e,a){"use strict";a.r(e);var n=a("P2sY"),o=a.n(n),i=a("8T0q"),r={name:"logEdit",props:["editId"],data:function(){return{form:{write_date:"",status:"",ask_log_content:"",remark:""},formLoading:!1,isLoading:!1,statusOptions:[{label:"有意向",id:1},{label:"报价中",id:2},{label:"投保中",id:3},{label:"已完成",id:4},{label:"已关闭",id:5}]}},created:function(){var t=this;this.formLoading=!0,Object(i.o)(this.editId).then(function(e){"error"!==e&&(console.log(e),t.form=e.data,setTimeout(function(){t.formLoading=!1},30))})},methods:{handleSubmit:function(){var t=this;this.isLoading=!0,Object(i.p)(this.editId,this.form).then(function(e){"error"!==e?(_g.toastMsg("success","编辑成功"),setTimeout(function(){t.$emit("close"),t.isLoading=!t.isLoading},1500)):t.isLoading=!t.isLoading})}},computed:{editShow:function(){return _g.getHasRule("insurance-ask-logupdate")}}},l=(a("29WY"),a("KHd+")),s=Object(l.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dialog-scroll",{attrs:{formLoading:t.formLoading}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px","label-position":"top"}},[a("el-form-item",{attrs:{label:"记录日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"选择日期"},model:{value:t.form.write_date,callback:function(e){t.$set(t.form,"write_date",e)},expression:"form.write_date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"询价进展"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入询价进展内容",clearable:""},model:{value:t.form.ask_log_content,callback:function(e){t.$set(t.form,"ask_log_content",e)},expression:"form.ask_log_content"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息",clearable:""},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:t.isLoading,size:"small"},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)},[],!1,null,"bb86dadc",null);s.options.__file="edit.vue";var c={name:"noCarInquiryLog",components:{logEdit:s.exports},filters:{status:function(t){switch(t){case 1:return"有意向";case 2:return"报价中";case 3:return"投保中";case 4:return"已完成";case 5:return"已关闭"}}},data:function(){return{isLoading:!1,tableData:[],centerDialogVisible:!1,tableLogData:[],editId:"",form:{write_date:"",status:"",ask_log_content:"",remark:""},statusOptions:[{label:"有意向",id:1},{label:"报价中",id:2},{label:"投保中",id:3},{label:"已完成",id:4},{label:"已关闭",id:5}]}},created:function(){this.init()},activated:function(){this.$route.query.pageClick&&(console.log("进入缓存"),this.init())},methods:{init:function(){var t=this;this.$store.dispatch("setLoading",!0);var e=this.$route.params.id;this.tableData=[],Object(i.k)(e).then(function(e){"error"!==e&&(t.tableData.push(e.data),t.initData())})},dialogClose:function(){this.centerDialogVisible=!1,this.$refs.dialog.close(),this.init()},handleClose:function(){this.centerDialogVisible=!1,this.$refs.dialog.close()},initData:function(){var t=this;this.$store.dispatch("setLoading",!0);var e={params:{ask_id:this.$route.params.id}};Object(i.q)(e).then(function(e){"error"!==e&&(t.tableLogData=e.data.list,setTimeout(function(){t.$store.dispatch("setLoading",!1)},30))})},handleFile:function(){this.$router.push({name:"logFileAdmin",params:{id:this.$route.params.id},query:{pageClick:_g.editRefresh("logFileAdmin")}})},handleEdit:function(t){this.editId=t.row.id,this.centerDialogVisible=!0,this.$refs.dialog.open()},handleDelete:function(t){var e=this;console.log(t.row),this.$confirm("确认删除该流转单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.n)(t.row.id).then(function(t){"error"!==t&&(_g.toastMsg("success","删除成功"),setTimeout(function(){e.init()},1500))})})},handleEmpty:function(){this.form={write_date:"",status:"",ask_log_content:"",remark:""}},handleSubmit:function(){var t=this,e=o()({ask_id:this.$route.params.id},this.form);Object(i.m)(e).then(function(e){"error"!==e&&(_g.toastMsg("success","添加成功"),setTimeout(function(){t.init()},1500))})}},computed:{indexShow:function(){return _g.getHasRule("insurance-ask-logindex")},addShow:function(){return _g.getHasRule("insurance-ask-logsave")},readShow:function(){return _g.getHasRule("insurance-ask-logread")},deleteShow:function(){return _g.getHasRule("insurance-ask-logdelete")}}},u=(a("6qfO"),Object(l.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("sticky",{attrs:{className:"sub-navbar",stickyTop:84}},[a("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[a("h1",{staticClass:"page-title-box"},[t._v("\n                非车受理记录-日志跟踪\n            ")]),t._v(" "),a("div",[a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(e){t.handleFile()}}},[t._v("文件管理")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-close"},on:{click:function(e){t.handleEmpty()}}},[t._v("清空表单")]),t._v(" "),t.addShow?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",loading:t.isLoading},on:{click:t.handleSubmit}},[t._v("保存")]):t._e()],1)])]),t._v(" "),a("div",{staticClass:"app_main_content"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-position":"top"}},[a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n                    日志消息\n                ")]),t._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"记录日期"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"选择日期"},model:{value:t.form.write_date,callback:function(e){t.$set(t.form,"write_date",e)},expression:"form.write_date"}})],1)],1),t._v(" "),a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item2",attrs:{span:12}},[a("el-form-item",{attrs:{label:"询价进展"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入询价进展内容",clearable:""},model:{value:t.form.ask_log_content,callback:function(e){t.$set(t.form,"ask_log_content",e)},expression:"form.ask_log_content"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item2",attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入备注信息",clearable:""},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n                    客户信息\n                ")]),t._v(" "),a("div",{staticClass:"block-content-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"填写日期",prop:"write_date"}}),t._v(" "),a("el-table-column",{attrs:{label:"业务员",prop:"salesman_name"}}),t._v(" "),a("el-table-column",{attrs:{label:"业务员联系方式",prop:"salesman_phone"}}),t._v(" "),a("el-table-column",{attrs:{label:"客户/单位",prop:"customer"}}),t._v(" "),a("el-table-column",{attrs:{label:"咨询内容",prop:"ask_content"}})],1)],1)]),t._v(" "),t.indexShow?a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n                    日志记录\n                ")]),t._v(" "),a("div",{staticClass:"block-content-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableLogData,border:""}},[a("el-table-column",{attrs:{label:"记录日期",prop:"write_date"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("status")(e.row.status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"询价进展",prop:"ask_log_content"}}),t._v(" "),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("operates",[t.readShow?a("operate",{attrs:{label:"修改",svgIcon:"",icon:"operate-edit"},on:{change:function(a){t.handleEdit(e)}}}):t._e(),t._v(" "),t.deleteShow?a("operate",{attrs:{label:"删除",svgIcon:"",icon:"operate-delete"},on:{change:function(a){t.handleDelete(e)}}}):t._e()],1)]}}])})],1)],1)]):t._e()])],1),t._v(" "),a("el-dialog",{ref:"dialog",staticClass:"dialog-slider",attrs:{top:"0",width:"400px","lock-scroll":"",visible:t.centerDialogVisible,"before-close":t.handleClose,title:"菜单编辑"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[t.centerDialogVisible?a("log-edit",{attrs:{editId:t.editId},on:{close:t.dialogClose}}):t._e()],1)],1)},[],!1,null,"24fe39c4",null));u.options.__file="index.vue";e.default=u.exports},"6qfO":function(t,e,a){"use strict";var n=a("b9Vv");a.n(n).a},"8T0q":function(t,e,a){"use strict";a.d(e,"r",function(){return o}),a.d(e,"a",function(){return i}),a.d(e,"f",function(){return r}),a.d(e,"g",function(){return l}),a.d(e,"h",function(){return s}),a.d(e,"b",function(){return c}),a.d(e,"d",function(){return u}),a.d(e,"e",function(){return d}),a.d(e,"c",function(){return f}),a.d(e,"i",function(){return m}),a.d(e,"j",function(){return p}),a.d(e,"k",function(){return b}),a.d(e,"l",function(){return h}),a.d(e,"q",function(){return g}),a.d(e,"m",function(){return _}),a.d(e,"n",function(){return v}),a.d(e,"o",function(){return k}),a.d(e,"p",function(){return y});var n=a("t3Un");function o(t){return n.a.get("insurance/company",t)}function i(t){return n.a.post("insurance/company",t)}function r(t){return n.a.delete("insurance/company/"+t)}function l(t){return n.a.get("insurance/company/"+t)}function s(t,e){return n.a.put("insurance/company/",t,e)}function c(t){return n.a.post("insurance/companyRate",t)}function u(t){return n.a.get("insurance/companyRate/"+t)}function d(t,e){return n.a.put("insurance/companyRate/",t,e)}function f(t){return n.a.delete("insurance/companyRate/"+t)}function m(t){return n.a.post("insurance/ask",t)}function p(t){return n.a.delete("insurance/ask/"+t)}function b(t){return n.a.get("insurance/ask/"+t)}function h(t,e){return n.a.put("insurance/ask/",t,e)}function g(t){return n.a.get("insurance/ask/logIndex",t)}function _(t){return n.a.post("insurance/ask/logSave",t)}function v(t){return n.a.delete("insurance/ask/logDelete/?id="+t,"")}function k(t){return n.a.get("insurance/ask/logRead/?id="+t)}function y(t,e){return n.a.put("insurance/ask/logUpdate/",t,e)}},VOaP:function(t,e,a){},b9Vv:function(t,e,a){}}]);