(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-147c"],{"14/9":function(e,t,n){},"9Tym":function(e,t,n){},NO99:function(e,t,n){e.exports=n.p+"static/img/500269947.cb40baf.jpg"},"StW+":function(e,t,n){"use strict";var o=n("iCc5"),s=n.n(o),a=n("V7oC"),i=n.n(a);new(function(){function e(){s()(this,e),this.handle={}}return i()(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError('"listener" must be a function');this.handle[e]||(this.handle[e]=[]),this.handle[e].push(t)}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];var a=this.handle[e];Array.isArray(a)&&a.map(function(e){e.apply(t,o)})}},{key:"off",value:function(e,t){var n=this.handle[e];if(t){if(Array.isArray(n)){var o=n.indexOf(t);o>-1&&n.splice(o,1)}}else this.handle[e]=[]}},{key:"install",value:function(e){e.prototype.$subscribe=this}}]),e}())},V7oC:function(e,t,n){"use strict";t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n("SEkw"));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,o.default)(e,s.key,s)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()},Yfch:function(e,t,n){"use strict"},Yyxl:function(e,t,n){"use strict";n.r(t);n("Yfch"),n("StW+"),n("2c6e");var o=n("t3Un"),s=(n("oYx3"),n("NO99")),a=n.n(s),i={name:"login",data:function(){return{restaurants:[],loginForm:{username:"",password:""},dialogFlag:!0,loginLoading:!0,loginActive:!1,loginBgFlag:!1,loginBg:a.a,rememberNews:[],checkList:[],loginRules:{username:[{required:!0,trigger:"blur",message:"请输入正确的用户名"}],password:[{required:!0,trigger:"blur",validator:function(e,t,n){t.length<5?n(new Error("密码不能小于5位")):n()}}]},loading:!1,pwdType:"password",menusList:null}},created:function(){var e=this;setTimeout(function(){e.loginActive=!0},300);var t=Lockr.get("companyReAccount"),n=Lockr.get("companyRePassword");t&&(this.loginForm.username=t,this.checkList.push("记住账号"),this.rememberNews.push("记住账号")),n&&(this.loginForm.password=n,this.checkList.push("记住密码"),this.rememberNews.push("记住密码"))},mounted:function(){this.restaurants=[],this.loginBg&&(this.loginBgFlag=!0)},methods:{handleSelect:function(){},querySearch:function(e,t){var n=this.restaurants;t(e?n.filter(this.createFilter(e)):n),console.log("sss")},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleCheckbox:function(e){this.rememberNews=e},showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var e=this;this.$refs.loginForm.validate(function(t){if(!t)return _g.toastMsg("error","账号密码格式错误"),!1;e.loginLoading=!1,setTimeout(function(){e.loading=!e.loading;var t={};t.username=e.loginForm.username,t.password=e.loginForm.password;var n=!1,s=!1;_(e.rememberNews).forEach(function(e){"记住账号"===e&&(n=!0),"记住密码"===e&&(s=!0)}),n?Lockr.set("companyReAccount",e.loginForm.username):Lockr.rm("companyReAccount"),s?Lockr.set("companyRePassword",e.loginForm.password):Lockr.rm("companyRePassword"),o.a.post("company/base/login",t).then(function(t){"error"!==t?(console.log(t),Lockr.set("authKey",t.data.authKey),Lockr.set("sessionId",t.data.sessionId),window.axios.defaults.headers.authKey=Lockr.get("authKey"),e.loading=!e.loading,e.$store.dispatch("setAuthKey",t.data.authKey).then(function(){setTimeout(function(){"/companyHome"!==e.$route.path?router.replace("/companyHome"):_g.shallowRefresh(e.$route.name)})})):(console.log("进来了"),e.loginLoading=!0)})},1200)})}},computed:{sidebar:function(){return this.$store.state.app.sidebar},device:function(){return this.$store.state.app.device}}},r=(n("Zqoy"),n("xN6j"),n("KHd+")),l=Object(r.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[e.loginBgFlag?n("div",{staticClass:"login-bg"},[n("div",{staticClass:"mask_box"}),e._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("img",{staticClass:"img",attrs:{src:e.loginBg}})])],1):e._e(),e._v(" "),n("div",{staticClass:"login-from-container",class:e.loginActive?"active":""},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.loginLoading,expression:"loginLoading"}],ref:"loginForm",staticClass:"login-form",attrs:{autoComplete:"on",model:e.loginForm,rules:e.loginRules,"label-position":"left"}},[n("h3",{staticClass:"title"},[e._v("欢迎登录"),n("span")]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("span",{staticClass:"svg-container svg-container_login"},[n("svg-icon",{staticClass:"svg_icon",attrs:{"icon-class":"user"}})],1),e._v(" "),n("el-autocomplete",{attrs:{"popper-class":"my-autocomplete","fetch-suggestions":e.querySearch,autoComplete:"off",placeholder:"请输入用户名"},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[n("p",[e._v(e._s(o.value))])]}}]),model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("span",{staticClass:"svg-container"},[n("svg-icon",{staticClass:"svg_icon",attrs:{"icon-class":"password"}})],1),e._v(" "),n("el-input",{attrs:{type:e.pwdType,autoComplete:"off",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleLogin(t):null}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),e._v(" "),n("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[n("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),n("div",{staticClass:"tips"},[n("el-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-checkbox-group",{on:{change:e.handleCheckbox},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[n("el-checkbox",{attrs:{label:"记住账号"}}),e._v(" "),n("el-checkbox",{attrs:{label:"记住密码"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"re-password"})])],1)],1),e._v(" "),n("div",{staticClass:"login-btn",on:{click:e.handleLogin}},[e._v("立即登录")])],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loginLoading,expression:"!loginLoading"}],staticClass:"login-loading-container content"},[e._m(0),e._v(" "),n("p",{staticClass:"loading_text"},[e._v("正在登录中...")])])],1)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"loader3"},[t("span"),this._v(" "),t("span")])}],!1,null,"c737c786",null);l.options.__file="companyLogin.vue";t.default=l.exports},Zqoy:function(e,t,n){"use strict";var o=n("14/9");n.n(o).a},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},xN6j:function(e,t,n){"use strict";var o=n("9Tym");n.n(o).a}}]);