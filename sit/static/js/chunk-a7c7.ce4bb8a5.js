(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a7c7"],{"080y":function(e,t,a){},"828q":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s}),a.d(t,"d",function(){return l}),a.d(t,"c",function(){return o});var i=a("t3Un");function n(e){return i.a.post("flow/flowDesign",e)}function s(e){return i.a.get("flow/flowDesign/"+e)}function l(e,t){return i.a.put("flow/flowDesign/",e,t)}function o(e){return i.a.post("flow/flowDesign/enables",e)}},WzsC:function(e,t,a){"use strict";a.r(t);var i=a("XINx"),n=(a("t3Un"),a("pCtG")),s=(a("828q"),a("qL4L")),l=a("v917"),o={name:"circulationExamineList",directives:{elDragDialog:i.a},data:function(){return{pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}},{text:"今天",onClick:function(e){var t=new Date,a=new Date;e.$emit("pick",[a,t])}}]},queryTime:"",searchStatus:"",examineData:null,tableData:[],loading:!0,statusFlag:!1,examineFlag:!1,tableHeight:null,loadingEditIndex:null,loadingDeleteIndex:null,update:!1,modifyFlag:!0,handleEvent:!0,examineLoading:!0,examineTableLoading:!0,backspaceFlag:!0,centerDialogVisible:!1,doCheckData:null,examineTableData:[],backspaceOptions:[],examineTopData:[],improperStatus:!1,examineId:"",editId:"",examineModifyForm:{commission_rate:"",total_rate:"",policy_num:""},searchForm:{status:"",keywords:"",start:"",end:"",queryCheck:0},statusOptions:_g.statusOptions,options:[{value:"admin_circulation_sheet",label:"流转单"}],statusForm:{project_name:"",wf_id:"",new_type:"",check_con:"",wf_fid:"",url:"",wf_type:""},examineForm:{check_con:"",flow_process:"",wf_fid:"",wf_type:"",wf_id:"",wf_title:"",process_name:"",wf_backflow:""},newTypeOptions:[{value:"0",label:"普通"},{value:"1",label:"加急"},{value:"2",label:"紧急"},{value:"3",label:"特急"}],rules:{check_con:[{required:!0,message:"请填写审批意见sss",trigger:"blur"}]}}},watch:{searchStatus:function(e,t){this.searchForm.status=e.toString(",")}},components:{examine:l.default},mixins:[n.a],created:function(){var e=this;bus.$on("circulationExamineList",function(t){console.log("更新了"),e.update=!e.update})},methods:{handleTime:function(e){this.searchForm.start=e[0],this.searchForm.end=e[1]},handleExamineClose:function(){var e=this;this.examineFlag=!1,this.$refs.examineDialog.close(),setTimeout(function(){e.update=!e.update},300)},examineClick:function(e){this.$router.push({name:"cirExamineList",params:{id:e.row.id},query:{pageClick:_g.editRefresh("cirExamineList")}})},handleSave:function(){var e=this;Object(s.c)(this.examineId,this.examineModifyForm).then(function(t){"error"!==t&&(_g.toastMsg("success","保存成功"),console.log(t),setTimeout(function(){e.modifyFlag=!0,e.handleEvent=!0},1500))})},handleSearch:function(){this.searchForm.queryCheck=1,this.update=!this.update},handlePaging:function(e){var t=this;this.loading=!0,console.log(e);var a=e.map(function(e){e.isEditLoading=!1,e.isDeleteLoading=!1,e.msg="",e.url="";var a={wf_fid:e.id,wf_type:t.options[0].value,status:e.status};return Object(s.h)(a).then(function(t){"error"!==t&&(e.msg=t.data.msg,e.url=t.data.url)}),e});setTimeout(function(){t.tableData=a,t.loading=!t.loading},500)}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews},indexShow:function(){return _g.getHasRule("admin-circulationsheet-index")},addShow:function(){return _g.getHasRule("admin-circulationsheet-save")},readShow:function(){return _g.getHasRule("admin-circulationsheet-read")},doCheckSaveShow:function(){return _g.getHasRule("flow-flow-do_check_save")},startSaveShow:function(){return _g.getHasRule("flow-flow-start_save")},doCheckShow:function(){return _g.getHasRule("flow-flow-do_check")}}},r=(a("z91R"),a("KHd+")),c=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"mainContainer",staticClass:"app_main_container"},[e.indexShow?a("div",{staticClass:"page_table_box"},[a("div",{ref:"topAdd",staticClass:"filter-container"},[a("el-date-picker",{staticStyle:{width:"300px","vertical-align":"middle","margin-right":"6px","margin-bottom":"10px"},attrs:{type:"daterange",align:"right","unlink-panels":"",size:"small","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},on:{change:e.handleTime},model:{value:e.queryTime,callback:function(t){e.queryTime=t},expression:"queryTime"}}),e._v(" "),a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请输入车牌号查询"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",size:"small",clearable:"",placeholder:"请选择状态查询"},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},e._l(e.statusOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0"},attrs:{type:"warning",icon:"el-icon-search",size:"small"},on:{click:e.handleSearch}},[e._v("查询")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"center",data:e.tableData,"element-loading-text":"数据加载中",stripe:"",border:"","max-height":e.tableHeight}},[a("el-table-column",{attrs:{label:"流水号",prop:"number","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"保险公司",prop:"company_name","min-width":"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单日期",prop:"write_date","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"车牌号(被保人)",prop:"car_license_num","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.car_license_num))]),e._v(" "),a("div",[e._v(e._s(t.row.insured_name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"保单号",prop:"policy_num","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[""!=t.row.policy_num?a("div",[e._v("商:"+e._s(t.row.policy_num))]):e._e(),e._v(" "),""!=t.row.force_policy_num?a("div",[e._v("交:"+e._s(t.row.force_policy_num))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"业务员",prop:"salesman_name","min-width":"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n            "+e._s(t.row.salesman_name)+"("+e._s(t.row.username)+")\n          ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v("\n              "+e._s(e._f("finish")(t.row.status))+"\n            ")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"94"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"pos_rel"},[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.examineClick(t)}}},[a("svg-icon",{staticStyle:{"margin-right":"4px"},attrs:{"icon-class":"operate-yes"}}),e._v("审核")],1)],1)]}}])})],1),e._v(" "),a("div",{ref:"btmGroup",staticStyle:{height:"60px"}},[a("el-row",{staticClass:"pos_rel",staticStyle:{height:"60px"},attrs:{type:"flex",align:"middle",justify:"end"}},[a("div",{staticClass:"block pages"},[a("paging",{attrs:{type:"admin/circulationSheet/getCheckList",updateType:"sheet",pagingdata:e.searchForm,update:e.update},on:{loadingChange:function(t){e.loading=!0},sheetPaging:e.handlePaging}})],1)])],1)],1):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"examineDialog",attrs:{title:"审核",visible:e.examineFlag,width:"1000px"},on:{"update:visible":function(t){e.examineFlag=t}}},[a("examine",{attrs:{data:e.examineData},on:{examineClose:e.handleExamineClose}})],1)],1)},[],!1,null,"ef2053de",null);c.options.__file="list.vue";t.default=c.exports},pCtG:function(e,t,a){"use strict";var i=a("7Qib");t.a={mounted:function(){var e=this;this.valHandle(),this.__resizeMainHanlder=Object(i.a)(function(){e.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(e,t){var a=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=a}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},z91R:function(e,t,a){"use strict";var i=a("080y");a.n(i).a}}]);