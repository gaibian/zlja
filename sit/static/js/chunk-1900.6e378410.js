(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1900"],{"8/u/":function(t,e,n){"use strict";n.d(e,"g",function(){return a}),n.d(e,"h",function(){return o}),n.d(e,"b",function(){return r}),n.d(e,"e",function(){return s}),n.d(e,"f",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"a",function(){return d}),n.d(e,"c",function(){return c});var i=n("t3Un");function a(t){return i.a.get("admin/users",t)}function o(t){return i.a.delete("admin/users/"+t)}function r(t){return i.a.post("admin/users",t)}function s(){return i.a.get("admin/groups")}function u(t,e){return i.a.put("admin/users/",t,e)}function l(t){return i.a.get("admin/users/"+t)}function d(t){return i.a.post("admin/users/followSave",t)}function c(t){return i.a.delete("admin/users/followDelete/"+t)}},"Hm+4":function(t,e,n){"use strict";n.r(e);var i=n("u7w5"),a=n("8/u/"),o={name:"financialRelationUserList",mixins:[n("pCtG").a],data:function(){return{id:null,tableData:null,loading:!0,tableHeight:null}},created:function(){var t=this;bus.$on("relationUserList",function(e){t.init()}),this.id=Number(this.$route.params.id),this.init()},methods:{init:function(){var t=this;this.loading=!0,Object(i.a)(this.id).then(function(e){"error"!==e&&(t.tableData=e.data.map(function(t){return t.isDeleteLoading=!1,t}),t.loading=!t.loading)})},handleDelete:function(t){var e=this;this.tableData[t.$index].isDeleteLoading=!0,this.$confirm("确认删除该关联人?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)(t.row.id).then(function(t){console.log(t),"error"!==t&&(_g.toastMsg("success","删除成功"),setTimeout(function(){e.init()},1e3))})}).catch(function(){e.tableData[t.$index].isDeleteLoading=!1})}},computed:{indexShow:function(){return _g.getHasRule("relation-index")},deleteShow:function(){return _g.getHasRule("relation-delete")},addShow:function(){return _g.getHasRule("relation-save")}},watch:{$route:function(t,e){t.name===e.name&&this.init()}}},r=(n("aVZE"),n("KHd+")),s=Object(r.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"mainContainer",staticClass:"app_main_container"},[n("div",{ref:"topAdd",staticClass:"top_add_container"},[n("router-link",{attrs:{to:{name:"financialRelationUserAdd",params:{pid:t.id}}}},[t.addShow?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"}},[t._v("\n        关联添加\n      ")]):t._e()],1)],1),t._v(" "),t.indexShow?n("div",{staticClass:"page_table_box"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,"max-height":t.tableHeight,border:""}},[n("el-table-column",{attrs:{label:"名称",prop:"name"}}),t._v(" "),n("el-table-column",{attrs:{label:"关联人",prop:"follow_name"}}),t._v(" "),n("el-table-column",{attrs:{label:"添加时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v("\n            "+t._s(t._f("timestampToTime")(e.row.add_time))+"\n          ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t.deleteShow?n("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",loading:e.row.isDeleteLoading},on:{click:function(n){t.handleDelete(e)}}},[t._v("删除")]):t._e()],1)]}}])})],1)],1):t._e()])},[],!1,null,"534cc70e",null);s.options.__file="list.vue";e.default=s.exports},aVZE:function(t,e,n){"use strict";var i=n("h/Oc");n.n(i).a},"h/Oc":function(t,e,n){},pCtG:function(t,e,n){"use strict";var i=n("7Qib");e.a={mounted:function(){var t=this;this.valHandle(),this.__resizeMainHanlder=Object(i.a)(function(){t.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(t,e){var n=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=n}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},u7w5:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n("t3Un");function a(t){return i.a.get("admin/users/followIndex?main_user_id="+t)}}}]);