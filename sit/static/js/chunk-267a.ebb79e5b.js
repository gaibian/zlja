(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-267a"],{"7kkd":function(e,t,s){"use strict";s.r(t);var n=s("xEMq"),a={name:"insideMessageList",mixins:[s("pCtG").a],data:function(){return{tableData:[],loading:!0,tableHeight:null,update:!1,multipleSelection:[],searchForm:{status:"",queryCheck:0},statusOptions:[{label:"全部",id:""},{label:"未读",id:0},{label:"已读",id:1}]}},filters:{finish:function(e){return 0==e?"未读":1==e?"已读":void 0},statusFilter:function(e){return 0==e?"danger":1==e?"success":void 0}},created:function(){this.init()},methods:{handleChange:function(){this.searchForm.queryCheck=1,this.update=!this.update},getSelectVal:function(e){this.multipleSelection=e,console.log(this.multipleSelection)},init:function(){},refresh:function(){this.searchForm.queryCheck=1,this.update=!this.update},handlePaging:function(e){var t=this;console.log(e),console.log("zhixingle"),this.loading=!0,setTimeout(function(){t.tableData=e.map(function(e){return e.isDeleteLoading=!1,e}),t.loading=!t.loading},300),console.log(this.tableData)},getSelectedIds:function(){var e=[];return _(this.multipleSelection).forEach(function(t){e.push(t.id)}),e},handleRenders:function(){var e=this,t={status:1,ids:this.getSelectedIds()};Object(n.c)(t).then(function(t){"error"!==t&&(console.log(t),_g.toastMsg("success","设置成功"),setTimeout(function(){Object(n.d)({params:{status:0}}).then(function(t){"error"!==t&&e.$store.dispatch("setNews",t.data.dataCount)}),e.refresh()},1500))})},handleDelates:function(){var e=this,t={ids:this.getSelectedIds()};Object(n.b)(t).then(function(t){"error"!==t&&(_g.toastMsg("success","删除成功"),setTimeout(function(){e.refresh()},1500))})},handleSee:function(e){this.$router.push({name:"inSideMessageDetails",params:{id:e.row.id},query:{pageClick:_g.editRefresh("inSideMessageDetails")}})},handleDelete:function(e){var t=this;console.log(e),this.$confirm("确认删除该菜单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e.row.id),Object(n.a)(e.row.id).then(function(e){_g.toastMsg("success","删除成功"),setTimeout(function(){t.refresh()},1500)})})}}},i=(s("GWgV"),s("KHd+")),l=Object(i.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"mainContainer",staticClass:"app_main_container"},[s("div",{staticClass:"page_table_box"},[s("div",{ref:"topAdd",staticClass:"filter-container"},[s("el-select",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",placeholder:"请选择状态查询"},on:{change:e.handleChange},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusOptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"max-height":e.tableHeight,border:"","element-loading-text":"数据加载中"},on:{"selection-change":e.getSelectVal}},[s("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),s("el-table-column",{attrs:{label:"标题",prop:"inside_message_title"}}),e._v(" "),s("el-table-column",{attrs:{label:"简短内容",prop:"inside_message_short"}}),e._v(" "),s("el-table-column",{attrs:{label:"添加时间",prop:"inside_message_add_time"}}),e._v(" "),s("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[s("el-tag",{attrs:{type:e._f("statusFilter")(t.row.status)}},[e._v("\n              "+e._s(e._f("finish")(t.row.status))+"\n            ")])],1)]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("operates",[s("operate",{attrs:{label:"查看",icon:"operate-see",svgIcon:""},on:{change:function(s){e.handleSee(t)}}}),e._v(" "),s("operate",{attrs:{label:"删除",icon:"operate-delete",svgIcon:""},on:{change:function(s){e.handleDelete(t)}}})],1)]}}])})],1),e._v(" "),s("div",{ref:"btmGroup",staticStyle:{height:"70px"}},[s("el-row",{staticClass:"pos_rel",staticStyle:{height:"70px"},attrs:{type:"flex",align:"middle",justify:"space-between"}},[s("div",[s("el-button",{attrs:{size:"small"},on:{click:e.handleDelates}},[e._v("批量删除")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.handleRenders}},[e._v("批量已读")])],1),e._v(" "),s("paging",{attrs:{type:"admin/insideMessage/getUserMessage",pagingdata:e.searchForm,updateType:"product",update:e.update},on:{productPaging:e.handlePaging}})],1)],1)],1)])},[],!1,null,null,null);l.options.__file="list.vue";t.default=l.exports},GWgV:function(e,t,s){"use strict";var n=s("fCzj");s.n(n).a},fCzj:function(e,t,s){},pCtG:function(e,t,s){"use strict";var n=s("7Qib");t.a={mounted:function(){var e=this;this.valHandle(),this.__resizeMainHanlder=Object(n.a)(function(){e.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(e,t){var s=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=s}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}}}]);