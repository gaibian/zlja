(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2dbc"],{"7Iii":function(e,t,r){"use strict";r.r(t);var a=r("8/u/"),l=r("haJh"),n=r("rJi+"),o={name:"lifeUsersAdd",data:function(){return{postForm:{status:"draft"},isLoading:!1,form:{username:"",password:"",realname:"",structure_id:null,remark:"",groups:[],pid:null,employee_number:"",organization_id:null,idcard_num:null,gender:1,birthday:"",bank:"",bank_card_num:null,bank_card_name:"",join_date:"",manual_team_id:"",userlevel:"",type:2,introducer_id:"",first_group_user_id:"",second_group_user_id:"",first_dept_user_id:"",manager_id:"",majordomo_id:""},manual_team_options:[],isBtnActive:!1,genderOptions:[{label:"男",id:1},{label:"女",id:2}],options:[{label:"顶级机构",id:0,name:"顶级机构",children:[]}],treeVal:"请选择上级机构",defaultProps:{children:"children",label:"label"},pidOptions:[{realname:"无",id:0}],orgsOptions:[],groupOptions:[],userLevelOptions:[{id:"T01",label:"顾问"},{id:"T02",label:"主任"},{id:"T03",label:"经理"},{id:"T04",label:"总监"}],selectedGroups:[],selectedIds:[]}},methods:{handleUser:function(){this.pidOptions=[]},remoteMethod:function(e){var t=this;if(console.log(e),""!==e){var r={params:{keywords:e,type:2}};Object(a.g)(r).then(function(e){t.pidOptions="error"!==e?e.data.list:[]})}},handleEmpty:function(){this.form={username:"",password:"",realname:"",structure_id:null,remark:"",groups:[],pid:null,employee_number:"",organization_id:null,idcard_num:null,gender:"",birthday:"",bank:"",bank_card_num:null,bank_card_name:"",join_date:"",manual_team_id:"",userlevel:"",type:2},this.treeVal="请选择上级机构"},handleNodeClick:function(e){this.isBtnActive=!0,this.treeVal=e.name,this.form.organization_id=e.id},selectCheckbox:function(){var e=this,t=!1;return _(this.groupOptions).forEach(function(t){e.selectedGroups.toString().indexOf(t.title)>-1&&e.selectedIds.push(t.id)}),this.selectedIds.length&&(this.form.groups=_.cloneDeep(this.selectedIds),t=!0),this.selectedIds=[],t},add:function(e){var t=this;if(!this.selectCheckbox())return _g.toastMsg("warning","请选择用户组"),!1;this.$refs.form.validate(function(e){e&&(t.isLoading=!t.isLoading,Object(a.b)(t.form).then(function(e){"error"!==e&&(_g.toastMsg("success","添加成功"),_g.clearVuex("setUsers"),setTimeout(function(){t.addRefresh("usersList")},1500)),t.isLoading=!t.isLoading}))})},getAllGroups:function(){var e=this;Object(a.e)().then(function(t){"error"!==t&&(e.groupOptions=t.data)})},getMechanismList:function(){var e=this;Object(l.f)(2).then(function(t){"error"!==t&&(e.options[0].children=t.data)})},getManualTeamList:function(){var e=this;Object(n.d)().then(function(t){"error"!==t&&(e.manual_team_options=t.data.list)})}},created:function(){this.getAllGroups(),this.getMechanismList(),this.getManualTeamList()}},i=(r("NBzj"),r("KHd+")),s=Object(i.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("sticky",{attrs:{className:"sub-navbar "+e.postForm.status,stickyTop:84}},[r("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[r("h1",{staticClass:"page-title-box"},[e._v("\n        代理人"),r("em"),r("span",[e._v("/添加列表项")])]),e._v(" "),r("div",[r("el-button",{attrs:{type:"danger",icon:"el-icon-close",size:"mini"},on:{click:function(t){e.handleEmpty()}}},[e._v("清空")]),e._v(" "),r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check",loading:e.isLoading},on:{click:function(t){e.add("form")}}},[e._v("保存")])],1)])]),e._v(" "),r("div",{staticClass:"app_main_content"},[r("el-form",{ref:"form",attrs:{size:"medium",model:e.form,"label-width":"100px","label-position":"top"}},[r("div",{staticClass:"block-box"},[r("el-row",{staticClass:"block-header-box"},[r("i"),e._v("基本信息")]),e._v(" "),r("div",{staticClass:"block-content-box"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{maxlength:12,placeholder:"请输入用户名",clearable:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username","string"==typeof t?t.trim():t)},expression:"form.username"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"==typeof t?t.trim():t)},expression:"form.password"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"真实姓名",prop:"realname"}},[r("el-input",{attrs:{placeholder:"请输入真实姓名",clearable:""},model:{value:e.form.realname,callback:function(t){e.$set(e.form,"realname","string"==typeof t?t.trim():t)},expression:"form.realname"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"上级",prop:"pid"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择上级",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},model:{value:e.form.pid,callback:function(t){e.$set(e.form,"pid",t)},expression:"form.pid"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"机构",prop:"organization_id"}},[r("multi-picker",{attrs:{options:e.options,width:360,treeVal:e.treeVal},on:{treeClick:e.handleNodeClick}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"代理人编号",prop:"employee_number"}},[r("el-input",{attrs:{placeholder:"请输入代理人编号",clearable:""},model:{value:e.form.employee_number,callback:function(t){e.$set(e.form,"employee_number","string"==typeof t?t.trim():t)},expression:"form.employee_number"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"身份证",prop:"idcard_num"}},[r("el-input",{attrs:{placeholder:"请输入身份证号码",clearable:""},model:{value:e.form.idcard_num,callback:function(t){e.$set(e.form,"idcard_num","string"==typeof t?t.trim():t)},expression:"form.idcard_num"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"性别",prop:"gender"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}},e._l(e.genderOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择生日日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"手工团队",prop:"manual_team_id"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.manual_team_id,callback:function(t){e.$set(e.form,"manual_team_id",t)},expression:"form.manual_team_id"}},e._l(e.manual_team_options,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"职级",prop:"userlevel"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择职级",clearable:""},model:{value:e.form.userlevel,callback:function(t){e.$set(e.form,"userlevel",t)},expression:"form.userlevel"}},e._l(e.userLevelOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"推荐人"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.introducer_id,callback:function(t){e.$set(e.form,"introducer_id",t)},expression:"form.introducer_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"一代组育成人"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.first_group_user_id,callback:function(t){e.$set(e.form,"first_group_user_id",t)},expression:"form.first_group_user_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"二代组育成人"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.second_group_user_id,callback:function(t){e.$set(e.form,"second_group_user_id",t)},expression:"form.second_group_user_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"一代部育成人"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.first_dept_user_id,callback:function(t){e.$set(e.form,"first_dept_user_id",t)},expression:"form.first_dept_user_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"经理"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.manager_id,callback:function(t){e.$set(e.form,"manager_id",t)},expression:"form.manager_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1)],1),e._v(" "),r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"总监"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入推荐人",filterable:"",remote:"",clearable:"","reserve-keyword":"","remote-method":e.remoteMethod},on:{"visible-change":e.handleUser},model:{value:e.form.majordomo_id,callback:function(t){e.$set(e.form,"majordomo_id",t)},expression:"form.majordomo_id"}},e._l(e.pidOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.realname,value:e.id}})}))],1)],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"block-box"},[r("el-row",{staticClass:"block-header-box"},[r("i"),e._v("其他信息")]),e._v(" "),r("div",{staticClass:"block-content-box"},[r("el-row",{attrs:{gutter:30}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"开户行",prop:"bank"}},[r("el-input",{attrs:{placeholder:"请输入开户行名称",clearable:""},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank","string"==typeof t?t.trim():t)},expression:"form.bank"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"卡号",prop:"bank_card_num"}},[r("el-input",{attrs:{placeholder:"请输入银行卡号",clearable:""},model:{value:e.form.bank_card_num,callback:function(t){e.$set(e.form,"bank_card_num","string"==typeof t?t.trim():t)},expression:"form.bank_card_num"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"开户名",prop:"bank_card_name"}},[r("el-input",{attrs:{placeholder:"请输入开户名",clearable:""},model:{value:e.form.bank_card_name,callback:function(t){e.$set(e.form,"bank_card_name","string"==typeof t?t.trim():t)},expression:"form.bank_card_name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"入司时间",prop:"join_date"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择入司时间"},model:{value:e.form.join_date,callback:function(t){e.$set(e.form,"join_date",t)},expression:"form.join_date"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请填写备注信息",border:"",clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark","string"==typeof t?t.trim():t)},expression:"form.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"用户组",prop:"groups"}},[r("el-checkbox-group",{model:{value:e.selectedGroups,callback:function(t){e.selectedGroups=t},expression:"selectedGroups"}},e._l(e.groupOptions,function(e,t){return r("el-checkbox",{key:t,staticClass:"form-checkbox",attrs:{label:e.title}})}))],1)],1)],1)])],1)],1)},[],!1,null,"199db57f",null);s.options.__file="add.vue";t.default=s.exports},"8/u/":function(e,t,r){"use strict";r.d(t,"g",function(){return l}),r.d(t,"h",function(){return n}),r.d(t,"b",function(){return o}),r.d(t,"e",function(){return i}),r.d(t,"f",function(){return s}),r.d(t,"d",function(){return d}),r.d(t,"a",function(){return c}),r.d(t,"c",function(){return u});var a=r("t3Un");function l(e){return a.a.get("admin/users",e)}function n(e){return a.a.delete("admin/users/"+e)}function o(e){return a.a.post("admin/users",e)}function i(){return a.a.get("admin/groups")}function s(e,t){return a.a.put("admin/users/",e,t)}function d(e){return a.a.get("admin/users/"+e)}function c(e){return a.a.post("admin/users/followSave",e)}function u(e){return a.a.delete("admin/users/followDelete/"+e)}},NBzj:function(e,t,r){"use strict";var a=r("i+OV");r.n(a).a},haJh:function(e,t,r){"use strict";r.d(t,"f",function(){return l}),r.d(t,"a",function(){return n}),r.d(t,"e",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"b",function(){return d});var a=r("t3Un");function l(e){return a.a.get("admin/organization?type="+e)}function n(e){return a.a.post("admin/organization",e)}function o(e){return a.a.get("admin/organization/"+e)}function i(e,t){return a.a.put("admin/organization/",e,t)}function s(e){return a.a.delete("admin/organization/"+e)}function d(e){return a.a.get("admin/organization/getChildArea/"+e)}},"i+OV":function(e,t,r){},"rJi+":function(e,t,r){"use strict";r.d(t,"d",function(){return l}),r.d(t,"e",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return i}),r.d(t,"b",function(){return s});var a=r("t3Un");function l(e){return a.a.get("admin/manualTeam",e)}function n(e){return a.a.delete("admin/manualTeam/"+e)}function o(e){return a.a.post("admin/manualTeam",e)}function i(e){return a.a.get("admin/manualTeam/"+e)}function s(e,t){return a.a.put("admin/manualTeam/",e,t)}}}]);