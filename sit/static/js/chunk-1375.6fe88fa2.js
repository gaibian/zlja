(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1375"],{"4wxc":function(t,e,a){"use strict";var n=a("nnsX");a.n(n).a},"8T0q":function(t,e,a){"use strict";a.d(e,"r",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"f",function(){return r}),a.d(e,"g",function(){return s}),a.d(e,"h",function(){return c}),a.d(e,"b",function(){return l}),a.d(e,"d",function(){return m}),a.d(e,"e",function(){return u}),a.d(e,"c",function(){return p}),a.d(e,"i",function(){return d}),a.d(e,"j",function(){return f}),a.d(e,"k",function(){return _}),a.d(e,"l",function(){return g}),a.d(e,"q",function(){return v}),a.d(e,"m",function(){return y}),a.d(e,"n",function(){return h}),a.d(e,"o",function(){return b}),a.d(e,"p",function(){return k});var n=a("t3Un");function i(t){return n.a.get("insurance/company",t)}function o(t){return n.a.post("insurance/company",t)}function r(t){return n.a.delete("insurance/company/"+t)}function s(t){return n.a.get("insurance/company/"+t)}function c(t,e){return n.a.put("insurance/company/",t,e)}function l(t){return n.a.post("insurance/companyRate",t)}function m(t){return n.a.get("insurance/companyRate/"+t)}function u(t,e){return n.a.put("insurance/companyRate/",t,e)}function p(t){return n.a.delete("insurance/companyRate/"+t)}function d(t){return n.a.post("insurance/ask",t)}function f(t){return n.a.delete("insurance/ask/"+t)}function _(t){return n.a.get("insurance/ask/"+t)}function g(t,e){return n.a.put("insurance/ask/",t,e)}function v(t){return n.a.get("insurance/ask/logIndex",t)}function y(t){return n.a.post("insurance/ask/logSave",t)}function h(t){return n.a.delete("insurance/ask/logDelete/?id="+t,"")}function b(t){return n.a.get("insurance/ask/logRead/?id="+t)}function k(t,e){return n.a.put("insurance/ask/logUpdate/",t,e)}},nnsX:function(t,e,a){},zNnu:function(t,e,a){"use strict";a.r(e);var n=a("P2sY"),i=a.n(n),o=a("8T0q"),r={status:"draft",title:"",content:"",content_short:"",source_uri:"",image_uri:"",source_name:"",display_time:void 0,id:void 0,platforms:["a-platform"],comment_disabled:!1},s={components:{Tinymce:a("glbJ").a},name:"companyEdit",data:function(){return{form:{company_name:"",company_abstract:"",company_description:"",company_phone:"",company_url:"",company_pic:"",company_logo:"",commission_rate_deal_type:"",total_rate_deal_type:"",sort:""},typeOptions:[{label:"含税结算",id:1},{label:"未税结算",id:2}],postForm:i()({},r),imageUrl:"",imageUrl1:"",tempUrl:"",dataObj:{token:"",key:""},fileList:[],dialogImageUrl:"",dialogVisible:!1,id:null,isLoading:!1,rules:{company_name:[{required:!0,message:"请输入保险公司名称",trigger:"blur"}],company_abstract:[{required:!0,message:"请输入保险公司简介",trigger:"blur"},{min:0,max:200,message:"最多输入200个字",trigger:"blur"}],company_description:[{required:!0,message:"请输入保险公司描述"}],company_phone:[{required:!0,message:"请输入保险公司电话号码",trigger:"blur"}],company_url:[{required:!0,message:"请输入保险公司网址",trigger:"blur"}],company_pic:[{required:!0,message:"请上传保险公司图片"}],company_logo:[{required:!0,message:"请上传保险公司logo"}]}}},activated:function(){this.$route.query.pageClick&&this.init()},created:function(){this.init()},methods:{init:function(){var t=this;this.$store.dispatch("setLoading",!0),this.id=this.$route.params.id,Object(o.g)(this.id).then(function(e){"error"!==e&&(t.form=e.data,t.postForm.content=e.data.company_description,t.imageUrl=""+t.urlAds+e.data.company_pic,t.imageUrl1=""+t.urlAds+e.data.company_logo,t.$store.dispatch("setLoading",!1))})},handleSubmit:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.form.company_description=t.postForm.content,Object(o.h)(t.id,t.form).then(function(e){"error"!==e&&(t.isLoading=!t.isLoading,setTimeout(function(){t.addRefresh("insuranceList")}))}))})},handleImageSuccess:function(t){this.form.company_pic=t.data,this.imageUrl=""+this.urlAds+t.data},handleImageSuccess1:function(t){this.form.company_logo=t.data,this.imageUrl1=""+this.urlAds+t.data},rmImage:function(){},handlePreview:function(t){},handleRemove:function(){}},computed:{editShow:function(){return _g.getHasRule("insurance-company-update")}}},c=(a("4wxc"),a("KHd+")),l=Object(c.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app_main_container1"},[a("sticky",{attrs:{className:"sub-navbar"+t.postForm.status,stickyTop:84}},[a("div",{ref:"appMainFixed",staticClass:"app-main-btm-fixed"},[a("h1",{staticClass:"page-title-box"},[t._v("\n        编辑保险公司"),a("em"),a("span")]),t._v(" "),a("div",[t.editShow?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"mini",loading:t.isLoading},on:{click:t.handleSubmit}},[t._v("保存")]):t._e()],1)])]),t._v(" "),a("div",{staticClass:"app_main_content"},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n          公司类型\n        ")]),t._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("el-input",{attrs:{placeholder:"请输入保险公司名称"},model:{value:t.form.company_name,callback:function(e){t.$set(t.form,"company_name","string"==typeof e?e.trim():e)},expression:"form.company_name"}})],1)],1),t._v(" "),a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"公司电话",prop:"company_phone"}},[a("el-input",{attrs:{placeholder:"请输入保险公司电话"},model:{value:t.form.company_phone,callback:function(e){t.$set(t.form,"company_phone","string"==typeof e?e.trim():e)},expression:"form.company_phone"}})],1)],1),t._v(" "),a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"公司网址",prop:"company_url"}},[a("el-input",{attrs:{placeholder:"请输入保险公司网址"},model:{value:t.form.company_url,callback:function(e){t.$set(t.form,"company_url","string"==typeof e?e.trim():e)},expression:"form.company_url"}})],1)],1),t._v(" "),a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"排序",prop:"sort"}},[a("el-input",{attrs:{placeholder:"请输入排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort","string"==typeof e?e.trim():e)},expression:"form.sort"}})],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"手续费结算方式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择手续费结算方式"},model:{value:t.form.total_rate_deal_type,callback:function(e){t.$set(t.form,"total_rate_deal_type",e)},expression:"form.total_rate_deal_type"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],1)],1),t._v(" "),a("el-col",{staticClass:"col-item",attrs:{span:6}},[a("el-form-item",{attrs:{label:"佣金结算方式"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择佣金结算方式"},model:{value:t.form.commission_rate_deal_type,callback:function(e){t.$set(t.form,"commission_rate_deal_type",e)},expression:"form.commission_rate_deal_type"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})}))],1)],1)],1),t._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{staticClass:"col-item4",attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司简介",prop:"company_abstract"}},[a("el-input",{attrs:{type:"textarea",maxlength:200,minlength:10},model:{value:t.form.company_abstract,callback:function(e){t.$set(t.form,"company_abstract","string"==typeof e?e.trim():e)},expression:"form.company_abstract"}})],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n          公司描述\n        ")]),t._v(" "),a("div",{staticClass:"block-content-box",staticStyle:{"padding-right":"12px","box-sizing":"border-box"}},[a("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{prop:"company_description",label:"公司描述"}},[a("tinymce",{ref:"editor",attrs:{height:200},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}})],1)],1)]),t._v(" "),a("div",{staticClass:"block-box"},[a("h1",{staticClass:"block-header-box"},[a("i"),t._v("\n          图片上传\n        ")]),t._v(" "),a("div",{staticClass:"block-content-box"},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司图片",prop:"company_pic"}},[a("el-upload",{staticStyle:{width:"200px",height:"auto",position:"relative"},attrs:{action:t.urlAds+"admin/upload",data:t.dataObj,drag:!0,multiple:!1,"show-file-list":!1,"on-success":t.handleImageSuccess}},[a("div",{staticClass:"el-upload-text"},[a("div",{staticClass:"image-preview image-app-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl.length>1,expression:"imageUrl.length>1"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:t.imageUrl}}),t._v(" "),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])]),t._v(" "),a("div",{staticClass:"upload-btm-text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])])],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"公司logo",prop:"company_logo"}},[a("el-upload",{staticStyle:{width:"200px",height:"auto",position:"relative"},attrs:{action:t.urlAds+"admin/upload",data:t.dataObj,drag:!0,multiple:!1,"show-file-list":!1,"on-success":t.handleImageSuccess1}},[a("div",{staticClass:"el-upload-text"},[a("div",{staticClass:"image-preview image-app-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.imageUrl1.length>1,expression:"imageUrl1.length>1"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:t.imageUrl1}}),t._v(" "),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:t.rmImage}})])])]),t._v(" "),a("div",{staticClass:"upload-btm-text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])])])])],1)],1)],1)],1)])])],1)],1)},[],!1,null,"51abd820",null);l.options.__file="edit.vue";e.default=l.exports}}]);