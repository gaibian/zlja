(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ce8"],{"14Xm":function(e,t,n){e.exports=n("u938")},"8/u/":function(e,t,n){"use strict";n.d(t,"g",function(){return a}),n.d(t,"h",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var r=n("t3Un");function a(e){return r.a.get("admin/users",e)}function i(e){return r.a.delete("admin/users/"+e)}function o(e){return r.a.post("admin/users",e)}function l(){return r.a.get("admin/groups")}function s(e,t){return r.a.put("admin/users/",e,t)}function c(e){return r.a.get("admin/users/"+e)}function u(e){return r.a.post("admin/users/followSave",e)}function d(e){return r.a.delete("admin/users/followDelete/"+e)}},"8T0q":function(e,t,n){"use strict";n.d(t,"r",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"f",function(){return o}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return f}),n.d(t,"k",function(){return h}),n.d(t,"l",function(){return _}),n.d(t,"q",function(){return y}),n.d(t,"m",function(){return b}),n.d(t,"n",function(){return g}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return w});var r=n("t3Un");function a(e){return r.a.get("insurance/company",e)}function i(e){return r.a.post("insurance/company",e)}function o(e){return r.a.delete("insurance/company/"+e)}function l(e){return r.a.get("insurance/company/"+e)}function s(e,t){return r.a.put("insurance/company/",e,t)}function c(e){return r.a.post("insurance/companyRate",e)}function u(e){return r.a.get("insurance/companyRate/"+e)}function d(e,t){return r.a.put("insurance/companyRate/",e,t)}function m(e){return r.a.delete("insurance/companyRate/"+e)}function p(e){return r.a.post("insurance/ask",e)}function f(e){return r.a.delete("insurance/ask/"+e)}function h(e){return r.a.get("insurance/ask/"+e)}function _(e,t){return r.a.put("insurance/ask/",e,t)}function y(e){return r.a.get("insurance/ask/logIndex",e)}function b(e){return r.a.post("insurance/ask/logSave",e)}function g(e){return r.a.delete("insurance/ask/logDelete/?id="+e,"")}function v(e){return r.a.get("insurance/ask/logRead/?id="+e)}function w(e,t){return r.a.put("insurance/ask/logUpdate/",e,t)}},D3Ub:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("4d7F"));t.default=function(e){return function(){var t=e.apply(this,arguments);return new r.default(function(e,n){return function a(i,o){try{var l=t[i](o),s=l.value}catch(e){return void n(e)}if(!l.done)return r.default.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})}}},FNQS:function(e,t,n){"use strict";n.r(t);var r=n("pCtG"),a=n("14Xm"),i=n.n(a),o=n("D3Ub"),l=n.n(o),s=n("GybM"),c=n("8T0q"),u=n("8/u/"),d={name:"policyEdit",props:["editId","salesmanName"],data:function(){return{form:{user_id:null,policy_number:"",premium:null,ship_tax_fee:"",stamp_tax_fee:"",company_id:null,company_name:"",insurance_number:"",insurance_id:"",insurance_name:"",insurance_detail:"",pay_time:"",issue_time:"",check_time:"",car_vehicle:"",endorsement_number:"",type:"",delivery:"",customer_number:"",insured_name:"",insured_card_num:"",insured_phone:"",applicant_name:"",applicant_card_num:"",applicant_phone:"",benefit_name:"",benefit_card_num:"",benefit_phone:"",salesman:""},typeOptions:[{label:"车险保单",id:1},{label:"非车险保单",id:2}],formLoading:!0,userOptions:[],companyOptions:[],kindCodeOptions:[],kindNameOptions:[],isLoading:!1}},created:function(){this.init()},methods:{remoteMethod:function(e){var t=this;if(""!==e){var n={params:{keywords:e}};Object(u.g)(n).then(function(e){t.userOptions="error"!==e?e.data.list:[]})}else console.warn("请输入关键词")},init:function(){var e=this;this.formLoading=!0,l()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.r)().then(function(t){"error"!==t&&(e.companyOptions=t.data.list)});case 2:e.remoteMethod(e.salesmanName),Object(s.b)(e.editId).then(function(t){"error"!==t&&Object(s.a)(t.data.company_id).then(function(n){"error"!==n&&(e.kindCodeOptions=n.data,e.form=t.data,e.formLoading=!1)})});case 4:case"end":return t.stop()}},t,e)}))()},handleCompany:function(e){var t=this;_(this.companyOptions).forEach(function(e){(e.id=t.form.company_id)&&(t.form.company_name=e.company_name)}),Object(s.a)(e).then(function(e){"error"!==e&&(t.kindCodeOptions=e.data)})},handleKindName:function(e){var t=this;_(this.kindCodeOptions).forEach(function(n){n.id===e&&(t.form.insurance_number=n.number,t.form.insurance_name=n.name)})},handleSubmit:function(){var e=this;this.$refs.form.validate(function(t){e.isLoading=!e.isLoading,t&&Object(s.c)(e.editId,e.form).then(function(t){"error"!==t?(_g.toastMsg("success","保存成功"),setTimeout(function(){e.$emit("close"),e.isLoading=!e.isLoading})):e.isLoading=!e.isLoading})})}},computed:{editShow:function(){return _g.getHasRule("insurance-policy-update")}}},m=n("KHd+"),p=Object(m.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dialog-scroll",{attrs:{formLoading:e.formLoading}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top"}},[n("el-row",{staticClass:"classify_title"},[e._v("\n          基本信息\n        ")]),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"代理人",prop:"user_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":"",clearable:"","remote-method":e.remoteMethod,placeholder:"请选择代理人"},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id","string"==typeof t?t.trim():t)},expression:"form.user_id"}},e._l(e.userOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.realname,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"保单号",prop:"policy_number"}},[n("el-input",{attrs:{placeholder:"请输入保单号",clearable:""},model:{value:e.form.policy_number,callback:function(t){e.$set(e.form,"policy_number","string"==typeof t?t.trim():t)},expression:"form.policy_number"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"保费",prop:"premium"}},[n("el-input",{attrs:{placeholder:"请输入保费",clearable:""},model:{value:e.form.premium,callback:function(t){e.$set(e.form,"premium","string"==typeof t?t.trim():t)},expression:"form.premium"}})],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"车船税",prop:"ship_tax_fee"}},[n("el-input",{attrs:{placeholder:"请输入车船税",clearable:""},model:{value:e.form.ship_tax_fee,callback:function(t){e.$set(e.form,"ship_tax_fee","string"==typeof t?t.trim():t)},expression:"form.ship_tax_fee"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"印花税",prop:"stamp_tax_fee"}},[n("el-input",{attrs:{placeholder:"请输入印花税",clearable:""},model:{value:e.form.stamp_tax_fee,callback:function(t){e.$set(e.form,"stamp_tax_fee","string"==typeof t?t.trim():t)},expression:"form.stamp_tax_fee"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"实收保费时间",prop:"pay_time"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请输入实收保费时间"},model:{value:e.form.pay_time,callback:function(t){e.$set(e.form,"pay_time",t)},expression:"form.pay_time"}})],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"保险公司名称",prop:"company_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择保险公司名称"},on:{change:e.handleCompany},model:{value:e.form.company_id,callback:function(t){e.$set(e.form,"company_id","string"==typeof t?t.trim():t)},expression:"form.company_id"}},e._l(e.companyOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.company_name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"险种名称",prop:"insurance_id"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"请选择险种名称"},on:{change:e.handleKindName},model:{value:e.form.insurance_id,callback:function(t){e.$set(e.form,"insurance_id","string"==typeof t?t.trim():t)},expression:"form.insurance_id"}},e._l(e.kindCodeOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"险种编码",prop:"insurance_number"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"险种编码",disabled:""},model:{value:e.form.insurance_number,callback:function(t){e.$set(e.form,"insurance_number","string"==typeof t?t.trim():t)},expression:"form.insurance_number"}},e._l(e.kindCodeOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"出单时间",prop:"issue_time"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:"","value-format":"yyyy-MM-dd",placeholder:"请输入出单时间"},model:{value:e.form.issue_time,callback:function(t){e.$set(e.form,"issue_time",t)},expression:"form.issue_time"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"审单时间",prop:"check_time"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",clearable:"","value-format":"yyyy-MM-dd",placeholder:"请输入审单时间"},model:{value:e.form.check_time,callback:function(t){e.$set(e.form,"check_time",t)},expression:"form.check_time"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"保单类型",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择保单类型",clearable:""},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.typeOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}))],1)],1)],1),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"车架号",prop:"car_vehicle"}},[n("el-input",{attrs:{placeholder:"请输入车架号",clearable:""},model:{value:e.form.car_vehicle,callback:function(t){e.$set(e.form,"car_vehicle","string"==typeof t?t.trim():t)},expression:"form.car_vehicle"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"客户识别号",prop:"customer_number"}},[n("el-input",{attrs:{placeholder:"请输入客户识别号",clearable:""},model:{value:e.form.customer_number,callback:function(t){e.$set(e.form,"customer_number","string"==typeof t?t.trim():t)},expression:"form.customer_number"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"批单号",prop:"endorsement_number"}},[n("el-input",{attrs:{placeholder:"请输入批单号",clearable:""},model:{value:e.form.endorsement_number,callback:function(t){e.$set(e.form,"endorsement_number","string"==typeof t?t.trim():t)},expression:"form.endorsement_number"}})],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"配送信息",prop:"delivery"}},[n("el-input",{attrs:{type:"textarea",placeholder:"请输入配送信息",clearable:""},model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery","string"==typeof t?t.trim():t)},expression:"form.delivery"}})],1),e._v(" "),n("el-row",{staticClass:"classify_title"},[e._v("\n          被保人信息\n        ")]),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"被保人姓名",prop:"insured_name"}},[n("el-input",{attrs:{placeholder:"请输入被保人姓名",clearable:""},model:{value:e.form.insured_name,callback:function(t){e.$set(e.form,"insured_name","string"==typeof t?t.trim():t)},expression:"form.insured_name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"被保人身份证号\n",prop:"insured_card_num"}},[n("el-input",{attrs:{placeholder:"请输入被保人身份证号\n",clearable:""},model:{value:e.form.insured_card_num,callback:function(t){e.$set(e.form,"insured_card_num","string"==typeof t?t.trim():t)},expression:"form.insured_card_num"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"被保人手机号",prop:"insured_phone"}},[n("el-input",{attrs:{placeholder:"请输入被保人手机号",clearable:""},model:{value:e.form.insured_phone,callback:function(t){e.$set(e.form,"insured_phone",e._n(t))},expression:"form.insured_phone"}})],1)],1)],1),e._v(" "),n("el-row",{staticClass:"classify_title"},[e._v("\n          投保人信息\n        ")]),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"投保人姓名",prop:"applicant_name"}},[n("el-input",{attrs:{placeholder:"请输入投保人姓名",clearable:""},model:{value:e.form.applicant_name,callback:function(t){e.$set(e.form,"applicant_name","string"==typeof t?t.trim():t)},expression:"form.applicant_name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"投保人身份证号\n",prop:"applicant_card_num"}},[n("el-input",{attrs:{placeholder:"请输入投保人身份证号\n",clearable:""},model:{value:e.form.applicant_card_num,callback:function(t){e.$set(e.form,"applicant_card_num","string"==typeof t?t.trim():t)},expression:"form.applicant_card_num"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"投保人手机号",prop:"applicant_phone"}},[n("el-input",{attrs:{placeholder:"请输入投保人手机号",clearable:""},model:{value:e.form.applicant_phone,callback:function(t){e.$set(e.form,"applicant_phone",e._n(t))},expression:"form.applicant_phone"}})],1)],1)],1),e._v(" "),n("el-row",{staticClass:"classify_title"},[e._v("\n          受益人信息\n        ")]),e._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"受益人姓名",prop:"benefit_name"}},[n("el-input",{attrs:{placeholder:"请输入受益人姓名",clearable:""},model:{value:e.form.benefit_name,callback:function(t){e.$set(e.form,"benefit_name","string"==typeof t?t.trim():t)},expression:"form.benefit_name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"受益人身份证号\n",prop:"benefit_card_num"}},[n("el-input",{attrs:{placeholder:"请输入受益人身份证号\n",clearable:""},model:{value:e.form.benefit_card_num,callback:function(t){e.$set(e.form,"benefit_card_num","string"==typeof t?t.trim():t)},expression:"form.benefit_card_num"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"受益人手机号",prop:"benefit_phone"}},[n("el-input",{attrs:{placeholder:"请输入受益人手机号",clearable:""},model:{value:e.form.benefit_phone,callback:function(t){e.$set(e.form,"benefit_phone",e._n(t))},expression:"form.benefit_phone"}})],1)],1)],1),e._v(" "),n("el-form-item",[e.editShow?n("el-button",{attrs:{type:"primary",loading:e.isLoading},on:{click:e.handleSubmit}},[e._v("立即保存")]):e._e()],1)],1)],1)},[],!1,null,null,null);p.options.__file="edit.vue";var f=p.exports,h=n("XINx"),y=n("haJh"),b=n("rJi+"),g=n("7Qib"),v={name:"policyList",directives:{elDragDialog:h.a},mixins:[r.a],components:{policyEdit:f},data:function(){return{loading:!0,tableHeight:null,tableData:[],update:!1,loadingEditIndex:null,centerDialogVisible:!1,searchDialogVisible:!1,querySwitchFlag:!0,queryTime:"",pickerOptions2:{shortcuts:g.b},defaultProps:{children:"children",label:"label"},teamOptions:[],userOptions:[],options:[{label:"顶级机构",id:0,name:"顶级机构",children:[]}],treeVal:"请选择机构查询",searchForm:{keywords:"",organization_id:"",manual_team_id:"",user_id:"",start:"",end:"",queryCheck:0}}},watch:{querySwitchFlag:function(e,t){this.__resizeMainHanlder()}},created:function(){var e=this;console.log("重新刷新了"),Object(y.f)(1).then(function(t){"error"!==t&&(e.options[0].children=t.data)});Object(b.d)({params:{type:1}}).then(function(t){"error"!==t&&(e.teamOptions=t.data.list)}),bus.$on("policyList",function(t){e.update=!e.update})},methods:{handleSee:function(e){console.log(e),this.$router.push({name:"orderFileAdmin",params:{number:e.row.customer_number},query:{pageClick:_g.editRefresh("orderFileAdmin")}})},handleSearchDialogSure:function(){this.searchDialogVisible=!1,this.$refs.searchDialog.close(),this.searchForm.queryCheck=1,this.update=!this.update},handleSearchDialogCancel:function(){this.searchDialogVisible=!1,this.$refs.searchDialog.close()},handleSeniorSearch:function(){console.log("高级搜索"),this.searchDialogVisible=!0,this.$refs.searchDialog.open()},handleSearchClose:function(){this.searchDialogVisible=!1,this.$refs.searchDialog.close()},handleTime:function(e){this.searchForm.start=e[0],this.searchForm.end=e[1]},clearQuery:function(){this.treeVal="请选择机构查询",this.searchForm={keywords:"",organization_id:"",manual_team_id:"",user_id:"",start:"",end:"",queryCheck:0}},handleNodeClick:function(e){console.log(e),this.treeVal=e.item.name,this.searchForm.organization_id=e.id},remoteMethod:function(e){var t=this;if(""!==e){var n={params:{keywords:e,type:1}};Object(u.g)(n).then(function(e){t.userOptions="error"!==e?e.data.list:[]})}else console.warn("请输入关键词")},handleSearch:function(){this.searchForm.queryCheck=1,this.update=!this.update},handleDelete:function(e){var t=this;this.tableData[e.$index].isDeleteLoading=!0,this.$confirm("确定删除该保单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.e)(e.row.id).then(function(e){"error"!==e&&(_g.toastMsg("success","删除成功"),setTimeout(function(){t.update=!t.update}))})}).catch(function(){t.tableData[e.$index].isDeleteLoading=!1})},handlePaging:function(e){var t=this;this.loading=!0,setTimeout(function(){t.tableData=e.map(function(e){return e.isEditLoading=!1,e.isDeleteLoading=!1,e}),t.loading=!t.loading},300)},handleEdit:function(e){this.tableData[e.$index].isEditLoading=!0,this.editId=e.row.id,this.centerDialogVisible=!0,this.salesmanName=e.row.realname,this.loadingEditIndex=e.$index,this.$refs.dialog.open()},dialogClose:function(){this.tableData[this.loadingEditIndex].isEditLoading=!1,this.update=!this.update,this.centerDialogVisible=!1},handleClose:function(){this.tableData[this.loadingEditIndex].isEditLoading=!1,this.centerDialogVisible=!1,this.$refs.dialog.close()}},computed:{indexShow:function(){return _g.getHasRule("insurance-policy-index")},addShow:function(){return _g.getHasRule("insurance-policy-save")},readShow:function(){return _g.getHasRule("insurance-policy-read")},deleteShow:function(){return _g.getHasRule("insurance-policy-delete")}}},w=(n("t9YS"),Object(m.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"mainContainer",staticClass:"app_main_container"},[e.indexShow?n("div",{staticClass:"page_table_box"},[n("div",{ref:"topAdd"},[n("div",{staticClass:"filter-container"},[n("el-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("div",[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{size:"small",clearable:"",placeholder:"请输入保单号/车牌号查询"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}}),e._v(" "),n("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择开始日期"},model:{value:e.searchForm.start,callback:function(t){e.$set(e.searchForm,"start",t)},expression:"searchForm.start"}}),e._v(" "),n("el-date-picker",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",clearable:"",placeholder:"请选择结束日期"},model:{value:e.searchForm.end,callback:function(t){e.$set(e.searchForm,"end",t)},expression:"searchForm.end"}}),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"warning",icon:"el-icon-search",size:"small"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),n("div",{staticClass:"filter-item",staticStyle:{color:"#409EFF","font-size":"13px",cursor:"pointer"},on:{click:e.handleSeniorSearch}},[e._v("【高级搜索】")])],1),e._v(" "),n("div",[n("router-link",{staticClass:"filter-item",attrs:{to:"add"}},[e.addShow?n("el-button",{staticClass:"add_btn",attrs:{type:"primary",size:"small",icon:"el-icon-plus"}},[e._v("添加保单")]):e._e()],1),e._v(" "),n("router-link",{staticClass:"filter-item",attrs:{to:"property/excel/import"}},[n("el-button",{attrs:{type:"success",size:"small"}},[n("svg-icon",{staticStyle:{"margin-right":"6px"},attrs:{"icon-class":"import"}}),e._v("财险保单导入")],1)],1),e._v(" "),n("el-button",{staticClass:"filter-item",attrs:{type:"danger",size:"small"},on:{click:e.clearQuery}},[n("svg-icon",{staticStyle:{"margin-right":"6px"},attrs:{"icon-class":"clearQuery"}}),e._v("重置")],1)],1)])],1)]),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"element-loading-text":"数据加载中",border:"","max-height":e.tableHeight}},[n("el-table-column",{attrs:{label:"代理人",prop:"realname",fixed:"","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"保单号",prop:"policy_number","min-width":"230"}}),e._v(" "),n("el-table-column",{attrs:{label:"保费",prop:"premium"}}),e._v(" "),n("el-table-column",{attrs:{label:"车船税",prop:"ship_tax_fee"}}),e._v(" "),n("el-table-column",{attrs:{label:"印花税",prop:"stamp_tax_fee"}}),e._v(" "),n("el-table-column",{attrs:{label:"保险公司",prop:"company_name","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"险种编码",prop:"insurance_number","min-width":"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"险种名称",prop:"insurance_name","min-width":"150"}}),e._v(" "),n("el-table-column",{attrs:{label:"车架号",prop:"car_vehicle","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"批单号",prop:"endorsement_number"}}),e._v(" "),n("el-table-column",{attrs:{label:"添加时间","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v("\n          "+e._s(e._f("timestampToTime")(t.row.add_time))+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"55",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[n("operates",[n("operate",{attrs:{label:"查看文件",svgIcon:"",icon:"operate-see"},on:{change:function(n){e.handleSee(t)}}}),e._v(" "),e.readShow?n("operate",{attrs:{label:"编辑",svgIcon:"",icon:"operate-edit"},on:{change:function(n){e.handleEdit(t)}}}):e._e(),e._v(" "),e.deleteShow?n("operate",{attrs:{label:"删除",svgIcon:"",icon:"operate-delete"},on:{change:function(n){e.handleDelete(t)}}}):e._e()],1)],1)]}}])})],1),e._v(" "),n("div",{ref:"btmGroup",staticStyle:{height:"70px"}},[n("el-row",{staticClass:"pos_rel",staticStyle:{height:"70px"},attrs:{type:"flex",align:"middle",justify:"end"}},[n("paging",{attrs:{type:"insurance/policy",updateType:"policy",update:e.update,pagingdata:e.searchForm},on:{loadingChange:function(t){e.loading=!0},policyPaging:e.handlePaging}})],1)],1)],1):e._e(),e._v(" "),n("el-dialog",{ref:"dialog",staticClass:"dialog-slider",attrs:{width:"auto",visible:e.centerDialogVisible,"before-close":e.handleClose,title:"保单编辑"},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[e.centerDialogVisible?n("policy-edit",{attrs:{editId:e.editId,salesmanName:e.salesmanName},on:{close:e.dialogClose}}):e._e()],1),e._v(" "),n("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],ref:"searchDialog",attrs:{width:"500px",visible:e.searchDialogVisible,"before-close":e.handleSearchClose,title:"高级搜索"},on:{"update:visible":function(t){e.searchDialogVisible=t}}},[n("el-form",{staticStyle:{margin:"0 auto"},attrs:{"label-width":"104px","label-position":"left"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"日期"}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"",size:"small","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},on:{change:e.handleTime},model:{value:e.queryTime,callback:function(t){e.queryTime=t},expression:"queryTime"}})],1),e._v(" "),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"团队"}},[n("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择团队查询",clearable:""},model:{value:e.searchForm.manual_team_id,callback:function(t){e.$set(e.searchForm,"manual_team_id",t)},expression:"searchForm.manual_team_id"}},e._l(e.teamOptions,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}))],1),e._v(" "),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"代理人"}},[n("el-select",{staticClass:"filter-item",attrs:{clearable:"",filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,placeholder:"请输入代理人查询"},model:{value:e.searchForm.user_id,callback:function(t){e.$set(e.searchForm,"user_id","string"==typeof t?t.trim():t)},expression:"searchForm.user_id"}},e._l(e.userOptions,function(e){return n("el-option",{key:e.id,attrs:{label:e.realname,value:e.id}})}))],1),e._v(" "),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"机构"}},[n("multi-picker",{staticClass:"filter-item",attrs:{options:e.options,checkBoxFlag:!0,width:360,treeVal:e.treeVal},on:{treeClick:e.handleNodeClick}})],1),e._v(" "),n("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"保单号/车牌号"}},[n("el-input",{staticClass:"filter-item",attrs:{size:"small",clearable:"",placeholder:"请输入保单号/车牌号查询"},model:{value:e.searchForm.keywords,callback:function(t){e.$set(e.searchForm,"keywords",t)},expression:"searchForm.keywords"}})],1)],1),e._v(" "),n("el-row",{attrs:{type:"flex",align:"middle",justify:"center"}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearchDialogSure}},[e._v("确定")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:e.handleSearchDialogCancel}},[e._v("取消")])],1)],1)],1)},[],!1,null,"56114c95",null));w.options.__file="list.vue";t.default=w.exports},GybM:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return s});var r=n("t3Un");function a(e){return r.a.post("insurance/policy",e)}function i(e){return r.a.delete("insurance/policy/",e)}function o(e){return r.a.get("insurance/kind/getKindByCompanyId?company_id="+e)}function l(e){return r.a.get("insurance/policy/"+e)}function s(e,t){return r.a.put("insurance/policy/",e,t)}},haJh:function(e,t,n){"use strict";n.d(t,"f",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return c});var r=n("t3Un");function a(e){return r.a.get("admin/organization?type="+e)}function i(e){return r.a.post("admin/organization",e)}function o(e){return r.a.get("admin/organization/"+e)}function l(e,t){return r.a.put("admin/organization/",e,t)}function s(e){return r.a.delete("admin/organization/"+e)}function c(e){return r.a.get("admin/organization/getChildArea/"+e)}},ls82:function(e,t){!function(t){"use strict";var n,r=Object.prototype,a=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag",c="object"==typeof e,u=t.regeneratorRuntime;if(u)c&&(e.exports=u);else{(u=t.regeneratorRuntime=c?e.exports:{}).wrap=v;var d="suspendedStart",m="suspendedYield",p="executing",f="completed",h={},_={};_[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(E([])));b&&b!==r&&a.call(b,o)&&(_=b);var g=S.prototype=x.prototype=Object.create(_);k.prototype=g.constructor=S,S.constructor=k,S[s]=k.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(g),e},u.awrap=function(e){return{__await:e}},C($.prototype),$.prototype[l]=function(){return this},u.AsyncIterator=$,u.async=function(e,t,n,r){var a=new $(v(e,t,n,r));return u.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},C(g),g[s]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},u.values=E,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(F),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,a){return l.type="throw",l.arg=e,t.next=r,a&&(t.method="next",t.arg=n),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),F(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;F(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),h}}}function v(e,t,n,r){var a=t&&t.prototype instanceof x?t:x,i=Object.create(a.prototype),o=new D(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===a)throw i;return j()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var l=L(o,n);if(l){if(l===h)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=w(e,t,n);if("normal"===s.type){if(r=n.done?f:m,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=f,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function k(){}function S(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function $(e){var t;this._invoke=function(n,r){function i(){return new Promise(function(t,i){!function t(n,r,i,o){var l=w(e[n],e,r);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"==typeof c&&a.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,o)},function(e){t("throw",e,i,o)}):Promise.resolve(c).then(function(e){s.value=e,i(s)},o)}o(l.arg)}(n,r,t,i)})}return t=t?t.then(i,i):i()}}function L(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var a=w(r,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,h;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function F(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(a.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:j}}function j(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},ndWw:function(e,t,n){},pCtG:function(e,t,n){"use strict";var r=n("7Qib");t.a={mounted:function(){var e=this;this.valHandle(),this.__resizeMainHanlder=Object(r.a)(function(){e.valHandle(0,0)},100),window.addEventListener("resize",this.__resizeMainHanlder)},methods:{valHandle:function(e,t){var n=this.$refs.mainContainer.offsetHeight-40-((this.$refs.topAdd?this.$refs.topAdd.offsetHeight:0)+(this.$refs.btmGroup?this.$refs.btmGroup.offsetHeight:20));this.tableHeight=n}},beforeDestroy:function(){window.removeEventListener("resize",this.__resizeMainHanlder)}}},"rJi+":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return s});var r=n("t3Un");function a(e){return r.a.get("admin/manualTeam",e)}function i(e){return r.a.delete("admin/manualTeam/"+e)}function o(e){return r.a.post("admin/manualTeam",e)}function l(e){return r.a.get("admin/manualTeam/"+e)}function s(e,t){return r.a.put("admin/manualTeam/",e,t)}},t9YS:function(e,t,n){"use strict";var r=n("ndWw");n.n(r).a},u938:function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("ls82"),a)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}}}]);